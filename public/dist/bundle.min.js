function saveLocal(n,t){localStorage[n]=t}function getLocal(n){return localStorage[n]}function deleteLocal(n){localStorage.removeItem(n)}var app=angular.module("Application",["ui.router","ngResource","ngMessages","ngAnimate","ngMaterial","ngLetterAvatar"]);angular.module("Application").run(["$rootScope","$state","$mdToast","$state",function(n,t,e,t){n.go=function(n,e){t.go(n,e)},n.showSimpleToast=function(n){e.show(e.simple().textContent(n).position("top right").hideDelay(3e3))},n.statify=function(n,e){return e?t.href(n+"."+e.toLowerCase()):""}}]),angular.module("Application").config(["$stateProvider","$urlRouterProvider","$httpProvider","$mdThemingProvider",function(n,t,e,a){var o=function(n){getLocal("user")||n.go("login")};o.$inject=["$rootScope"],n.state("login",{url:"/login",onEnter:["$rootScope",function(n){getLocal("user")&&n.go("application.dashboard")}],templateUrl:"/views/_login/main.html",controller:"LoginCtrl"}).state("application",{url:"",onEnter:o,templateUrl:"/views/_application/main.html",controller:"ApplicationCtrl","abstract":!0}).state("application.dashboard",{url:"/",onEnter:o,views:{content:{templateUrl:"/views/_application/_dashboard/main.html",controller:"DashboardCtrl"}}}).state("application.zones",{url:"/zones",onEnter:o,views:{content:{templateUrl:"/views/_application/_zones/main.html",controller:"ZonesCtrl"}}}).state("application.tasks",{url:"/tasks",onEnter:o,views:{content:{templateUrl:"/views/_application/_tasks/main.html",controller:"TasksCtrl"}}}).state("application.magnitudes",{url:"/magnitudes",onEnter:o,views:{content:{templateUrl:"/views/_application/_magnitudes/main.html"}},"abstract":!0}).state("application.magnitudes.list",{url:"",onEnter:o,views:{inner:{templateUrl:"/views/_application/_magnitudes/list.html",controller:"MagnitudesCtrl"}}}).state("application.magnitudes.create",{url:"/create",onEnter:o,views:{inner:{templateUrl:"/views/_application/_magnitudes/create.html",controller:"CreateMagnitudeCtrl"}}}),t.otherwise("/login"),e.interceptors.push("AuthInterceptor"),a.theme("smartTheme").primaryPalette("orange").accentPalette("yellow")}]),angular.module("Application").controller("ApplicationCtrl",["$rootScope","$scope","OAuthService","RequestService",function(n,t,e,a){t.user={},t.array_colors=Array.apply(null,Array(27)).map(function(){return"#FF9800"}),t.closePopoverMain=function(){t.showMain=!1},t.closePopoverOptions=function(){t.showOptions=!1},this.WhoIAm=function(){e.whoiam()._(a.OneData("email",function(n){t.user.email=n}),a.Error())},this.WhoIAm(),t.logout=function(){e.logout()._(function(t){console.log(t),deleteLocal("user"),n.go("login")},a.Error())}}]),angular.module("Application").controller("DashboardCtrl",function(){}),angular.module("Application").controller("LoginCtrl",["$rootScope","$scope","OAuthService","RequestService",function(n,t,e,a){t.user={email:"",password:""},t.login=function(){var o=t.user;""!==o.email&&o.password&&e.login()._(o,a.OneData("token",function(t){saveLocal("user",t),n.go("application.dashboard")}),a.Error())}}]),angular.module("Application").controller("MagnitudesCtrl",["$scope","$rootScope","MagnitudeService","RequestService",function(n,t,e,a){n.create=function(){t.go("application.magnitudes.create")};var o=["ANALOG","DIGITAL"],i=["record","adjust"];n.Icon=function(n){return"mdi-"+i[n]},n.Type=function(n){return o[n]},n["delete"]=function(t){e.Basic().del({id:t},a.Seq(function(t){n.magnitudes=t}),a.Error())},this.All=function(){e.Basic().all(a.Seq(function(t){n.magnitudes=t}),a.Error())},this.All()}]),angular.module("Application").controller("CreateMagnitudeCtrl",["$rootScope","$scope","MagnitudeService","RequestService",function(n,t,e,a){t.goBack=function(){n.go("application.magnitudes.list")},t.magnitude={display_name:"",type:"0"},t.create=function(){var n=angular.copy(t.magnitude);""==n.display_name&&(n.display_name=chance.sentence({words:3}).split(" ").join("").replace(".","")),e.Basic()["new"](n,a.Message(t.goBack),a.Error())}}]),angular.module("Application").controller("TasksCtrl",function(){}),angular.module("Application").controller("ZonesCtrl",function(){}),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/main.html",'<ng-include src="\'/views/_application/__utils/popover-main.html\'"></ng-include>\n<ng-include src="\'/views/_application/__utils/popover-user.html\'"></ng-include>\n<div layout="row" flex>\n    <md-sidenav layout="column" flex="20" class="md-sidenav-left md-whiteframe-z2"  id="sidebar" md-component-id="left" md-is-locked-open="$mdMedia(\'gt-sm\')"  md-theme="smartTheme">\n        <header class="md-whiteframe-2dp">\n            <md-toolbar layout="row" ng-init="showMain=false">\n                <a class="md-toolbar-tools" flex="80" ng-href="{{statify(\'application\', titleMain)}}" layout="row">\n                    <i class="icon house_with_garden_36" flex="20"></i>\n                    <span flex>{{titleMain}}</span>\n\n                </a>\n                <md-button aria-label="Open main menu" class="md-icon-button" flex ng-click="showMain=!showMain; showOptions=false">\n                    <md-icon  md-font-icon="mdi-apps" class="mdi"></md-icon>\n                </md-button>\n\n\n            </md-toolbar>\n\n        </header>\n\n        <md-content>\n            <md-subheader class="md-primary" layout="row" ng-init="showOptions=false" layout-align="center center" ng-click="showOptions=!showOptions; showMain=false">\n                <span flex>{{user.email}}\n                </span>\n                <md-icon md-font-icon="mdi-chevron-down" class="mdi md-primary" flex ></md-icon>\n            </md-subheader>\n\n\n        </md-content>\n\n    </md-sidenav>\n\n\n    <div flex layout="column">\n        <div ui-view="content" flex></div>\n\n        <div flex class="footer">\n            <md-divider></md-divider>\n            <md-toolbar layout="row">\n             \n                    <h6 flex-offset="85"><i class="mdi mdi-copyright"></i><span>Smart Town 2016</span></h6>\n           \n\n            </md-toolbar>\n\n        </div>\n\n    </div>\n</div>\n\n\n\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_login/main.html",'<ui-title>Sign in</ui-title>\n\n<div  layout="row" layout-align="center center" layout-fill id="login-body" md-theme="smartTheme">\n\n\n    <div layout="column" flex-gt-md="35" flex-xs="50" flex-gt-xs="50" layout-padding>\n\n        <div layout="row" layout-align="center center">\n            <h2><i class="icon house_with_garden_72"></i><br>Smart Town Administration</h2>\n        </div>\n\n        <md-card layout="row" >\n            <form name="loginForm" flex layout="column" layout-align="center stretch" layout-padding layout-margin>\n                <h3 flex>Log in to your account</h3>\n                <md-input-container  class="md-block" flex>\n                    <label>Email</label>\n\n                    <input type="email" required name="email" ng-model="user.email" ng-pattern="/^.+@.+\\..+$/" >\n                    <div ng-messages="loginForm.email.$error" multiple md-auto-hide="false" ng-if=\'loginForm.email.$dirty\'>\n                        <div ng-message="required">This is required.</div>\n                        <div ng-message="pattern">\n                            Your email must look like an e-mail address.\n                        </div>\n                    </div>\n                </md-input-container>\n                <md-input-container   class="md-block" flex>\n                    <label>Password</label>\n\n                    <input ng-model="user.password" type="password" name="password" required>\n                    <div ng-messages="loginForm.password.$error" md-auto-hide="false" ng-if="loginForm.password.$dirty">\n                        <div ng-message="required">This is required.</div>\n                    </div>\n                </md-input-container>\n                <md-input-container layout-align="center center" flex>\n                    <div layout="row" layout-sm="column" layout-margin>\n                        <md-button class="md-raised" type="submit" ng-click="login()" flex flex-sm="100" ng>Login</md-button>\n\n                    </div>\n                </md-input-container>\n\n            </form>\n\n        </md-card>\n\n\n        <div layout="row" layout-align="center center">\n            <h5><i class="mdi mdi-copyright"></i> Smart Town 2016</h5>\n        </div>\n\n\n    </div>\n\n</div>\n\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/_dashboard/main.html","<ui-title>Dashboard</ui-title>\n\n\nhello world")}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/_magnitudes/create.html",'<md-toolbar class="md-whiteframe-1dp" id="main-toolbar">\n    <div class=" toolbar-create md-toolbar-tools" layout="row">\n        <md-button aria-label="Go Back" flex="10" class="button-back" ng-click="goBack()">\n            <i class="mdi mdi-chevron-left"></i>Go Back\n        </md-button>\n        <h2 flex>\n            <span>New Magnitude</span>\n        </h2>\n    </div>\n</md-toolbar>\n<md-content layout-padding layout="column" md-theme="smartTheme">\n    <div layout="row" flex class="input-create">\n        <div  flex="20"  flex-offset="5">\n            <h3>Display Name <br>(optional)</h3>\n            <p>Leave blank and we\'ll choose one for you</p>\n        </div>\n\n        <md-input-container flex="50" flex-offset="10">\n            <input ng-model="magnitude.display_name" aria-label="Display Name">\n        </md-input-container>\n\n    </div>\n    <md-divider ></md-divider>\n    <div layout="row" flex class="input-create">\n        <div  flex="20"  flex-offset="5">\n            <h3>System Type</h3>\n            <p>Working with real numbers or with on(1) or off(0)</p>\n        </div>\n\n        <md-radio-group ng-model="magnitude.type" flex="50" flex-offset="30">\n            <md-radio-button value="0" class="md-primary">Analog</md-radio-button>\n            <md-radio-button value="1" class="md-primary">Digital</md-radio-button>\n        </md-radio-group>\n\n    </div>\n    <md-divider></md-divider>\n    <div flex class="button-create" layout="row" layout-align="center center">\n        <md-button class="md-raised md-primary" ng-click="create()">Create Magnitude</md-button>\n    </div>\n</md-content>\n\n')}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/_magnitudes/list.html",'<md-toolbar class="md-whiteframe-1dp" id="main-toolbar">\n    <div class="md-toolbar-tools" layout="row"  layout-align="start center">\n\n        <md-input-container md-no-float class="md-block" flex> \n            <md-icon  md-font-icon="mdi-magnify" class="mdi"></md-icon>             \n            <input type="text" placeholder="Filter magnitudes">\n        </md-input-container>\n\n\n        <md-button class="md-icon-button" aria-label="More" flex="5" ng-click="create()">\n            <md-icon md-font-icon="mdi-plus" class="mdi"></md-icon>\n        </md-button>\n    </div>\n</md-toolbar>\n<md-content layout-padding layout="column" md-theme="smartTheme">\n\n    <md-list  ng-cloak class="magnitude-list">\n        <md-list-item  ng-repeat="magnitude in magnitudes">\n            <md-icon  md-font-icon="{{Icon(magnitude.type)}}" class="mdi magnitude-type-icon"></md-icon>  \n            <p> {{ magnitude.display_name }} </p>\n            \n            <p  flex-offset="30"><span class="md-whiteframe-1dp" ng-class="{\'badge\':magnitude.type===\'0\', \'badge-negative\':magnitude.type===\'1\'}">{{Type(magnitude.type)}}</span></p>\n            <md-button class="md-icon-button" aria-label="Delete" ng-click="delete(magnitude.id)">\n                <i class=" mdi mdi-delete" ></i>\n            </md-button>\n\n            <md-divider ng-if="!$last"></md-divider>\n\n        </md-list-item>\n\n    </md-list>\n\n</md-content>')}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/_magnitudes/main.html",'<ui-title>Magnitudes</ui-title>\n<div layout="column" ui-view="inner"></div>')}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/_tasks/main.html","<ui-title>Tasks</ui-title>\nhello tasks")}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/_zones/main.html","<ui-title>Zones</ui-title>\nHello zones")}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/__utils/popover-main.html",'<div class="popover-layer" ng-if="showMain" ng-click="closePopoverMain()"></div>\n\n\n<div class="popover-main md-open-menu-container md-whiteframe-z2 md-clickable" ng-class="{\'md-active\':showMain}" ng-if="showMain">\n    <div class="dropdown-caret">\n        <span class="caret-outer"></span>\n        <span class="caret-inner"></span>\n    </div>\n\n\n    <div class="popover-main-item" layout="row" flex>\n        <a class="popover-main-link" flex layout="column"   ui-sref="application.dashboard" layout-align="space-around center">\n            <md-icon  md-font-icon="mdi-bowling" class="mdi" flex></md-icon>\n            <span flex> Dashboard</span>\n\n        </a>\n        <a class="popover-main-link" flex layout="column" ui-sref="application.zones" layout-align="space-around center">\n\n            <md-icon  md-font-icon="mdi-basecamp" class="mdi" flex></md-icon>\n            <span flex>Zones</span>\n        </a>\n    </div>\n    <div class="popover-main-item" layout="row" flex>\n        <a class="popover-main-link" flex layout="column" ui-sref="application.tasks" layout-align="space-around center">\n            <md-icon  md-font-icon="mdi-alarm-check" class="mdi" flex></md-icon>\n            <span flex>Tasks</span>\n        </a>\n        <a class="popover-main-link" flex layout="column"  ui-sref="application.magnitudes.list" layout-align="space-around center">\n            <md-icon  md-font-icon="mdi-beer" class="mdi" flex></md-icon>\n            <span flex>Magnitudes</span>\n        </a>\n    </div>\n\n\n</div>')}])}(),function(n){try{n=angular.module("Application")}catch(t){n=angular.module("Application",[])}n.run(["$templateCache",function(n){n.put("/views/_application/__utils/popover-user.html",'<div class="popover-layer" ng-if="showOptions" ng-click="closePopoverOptions()"></div>\n<div class="popover-user-options md-open-menu-container md-whiteframe-z2 md-clickable" ng-class="{\'md-active\':showOptions}" ng-if="showOptions">\n    <div class="dropdown-caret">\n        <span class="caret-outer"></span>\n        <span class="caret-inner"></span>\n    </div>\n\n\n    <div layout="column" layout-align="space-between none" class="popover-content">\n        <a  flex layout="row"  layout-align="space-between center" class="item-popover">\n            <i class="mdi mdi-account-circle" flex="40"></i>\n            <span  flex>Account</span>\n\n        </a>\n\n        <a  flex layout="row"  layout-align="space-between center" class="item-popover">\n            <i class="mdi mdi-football-helmet" flex="40"></i>\n            <span flex>Invite</span>\n\n        </a>\n\n        <a  flex layout="row"  layout-align="space-between center" class="item-popover">\n            <i class="mdi mdi-power" flex="40"></i>\n            <span ng-click="logout()" flex>Logout</span>\n\n        </a>\n\n    </div>\n\n\n</div>')}])}(),angular.module("Application").directive("uiTitle",["$rootScope",function(n){return{restrict:"E",compile:function(t){var e=t[0].innerText;n.titleMain=e,t.attr("class","hide"),t.empty()}}}]),angular.module("Application").filter("nofirst",function(){return function(n){return n?n.slice(1):""}}),angular.module("Application").factory("ApiService",["$resource","$location",function(n,t){return{env:-1==t.absUrl().indexOf("localhost")?"prod":"dev",prod:{protocol:"https",host:"smart-town-db.herokuapp.com",port:"",root:"api"},dev:{protocol:"http",host:"localhost",port:"5060",root:"api"},getApiPath:function(n){var t=this[this.env];return t.protocol+"://"+t.host+(""!==t.port?":"+t.port:"")+"/"+t.root+"/"+n},rest:function(t,e,a){var o=n(this.getApiPath(t),a||{},e||{});return o}}}]),angular.module("Application").factory("AuthInterceptor",["$q","$location",function(n,t){return{request:function(n){n.headers=n.headers||{};var t=getLocal("user");return!n.headers.Authorization&&t&&(n.headers.Authorization=t),n},requestError:function(t){return n.reject(t)},response:function(t){return"ERROR"===t.data.status?n.reject(t):t||n.when(t)},responseError:function(e){return 403===e.status?(console.error("Error de acceso"),localStorage.user="",void t.path("/")):n.reject(e)}}}]),angular.module("Application").factory("MagnitudeService",["ApiService",function(n){return{base:"magnitude",Basic:function(){return n.rest(this.base+"/:id",{"new":{method:"POST",params:{}},all:{method:"GET",params:{}},del:{method:"DELETE",params:{id:"@id"}}})}}}]),angular.module("Application").factory("OAuthService",["ApiService",function(n){return{base:"oauth",login:function(){return n.rest(this.base+"/login",{_:{method:"POST",params:{}}})},logout:function(){return n.rest(this.base+"/logout",{_:{method:"GET",params:{}}})},whoiam:function(){return n.rest(this.base+"/whoiam",{_:{method:"GET",params:{}}})}}}]),angular.module("Application").factory("RequestService",["$rootScope",function(n){return{Error:function(){return function(t){n.showSimpleToast(data.error)}},OneData:function(t,e){return function(a){if(!a.data)return n.showSimpleToast("No data");var o=a.data[t];return o?void e(o):n.showSimpleToast("No Values")}},Message:function(t){return function(e){return e.message?(n.showSimpleToast(e.message),void(t&&t())):n.showSimpleToast("Successful: No Meesage")}},Seq:function(t){return function(e){if(!e.data)return n.showSimpleToast("No data");var a=e.data;t(a)}}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9qYXZhc2NyaXB0cy91dGlscy5qcyIsImFwcGxpY2F0aW9uLmpzIiwiY29uZmlnL2Jvb3QuanMiLCJjb25maWcvZW52aXJvbm1lbnQuanMiLCJidW5kbGUubWluLmpzIiwiY29udHJvbGxlcnMvYXBwbGljYXRpb25fY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL2Rhc2hib2FyZF9jb250cm9sbGVyLmpzIiwiY29udHJvbGxlcnMvbG9naW5fY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL21hZ25pdHVkZXNfY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL21hZ25pdHVkZV9jcmVhdGVfY29udHJvbGxlci5qcyIsImNvbnRyb2xsZXJzL3Rhc2tzX2NvbnRyb2xsZXIuanMiLCJjb250cm9sbGVycy96b25lc19jb250cm9sbGVyLmpzIiwiYXNzZXRzL3RlbXBsYXRlcy90ZW1wbGF0ZS1jYWNoZS5qcyIsImNvbXBvbmVudHMvZGlyZWN0aXZlcy90aXRsZV9kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2ZpbHRlcnMvZm9ybWF0X2ZpbHRlcnMuanMiLCJjb21wb25lbnRzL3NlcnZpY2VzL2FwaV9zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9zZXJ2aWNlcy9pbnRlcmNlcHRvcl9zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9zZXJ2aWNlcy9tYWduaXR1ZGVfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvb2F1dGhfc2VydmljZS5qcyIsImNvbXBvbmVudHMvc2VydmljZXMvcmVxdWVzdF9zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbInNhdmVMb2NhbCIsImtleSIsImRhdGEiLCJsb2NhbFN0b3JhZ2UiLCJnZXRMb2NhbCIsImRlbGV0ZUxvY2FsIiwicmVtb3ZlSXRlbSIsImFwcCIsImFuZ3VsYXIiLCJtb2R1bGUiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJG1kVG9hc3QiLCJnbyIsInN0YXRlIiwicGFyYW1zIiwic2hvd1NpbXBsZVRvYXN0IiwibWVzc2FnZSIsInNob3ciLCJzaW1wbGUiLCJ0ZXh0Q29udGVudCIsInBvc2l0aW9uIiwiaGlkZURlbGF5Iiwic3RhdGlmeSIsInBhcmVudCIsImNoaWxkIiwiaHJlZiIsInRvTG93ZXJDYXNlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwidmFsaWRVc2VyIiwiJGluamVjdCIsInVybCIsIm9uRW50ZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJhYnN0cmFjdCIsInZpZXdzIiwiY29udGVudCIsImlubmVyIiwib3RoZXJ3aXNlIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwiJHNjb3BlIiwiT0F1dGhTZXJ2aWNlIiwiUmVxdWVzdFNlcnZpY2UiLCJ1c2VyIiwiYXJyYXlfY29sb3JzIiwiQXJyYXkiLCJhcHBseSIsIm1hcCIsImNsb3NlUG9wb3Zlck1haW4iLCJzaG93TWFpbiIsImNsb3NlUG9wb3Zlck9wdGlvbnMiLCJzaG93T3B0aW9ucyIsInRoaXMiLCJXaG9JQW0iLCJ3aG9pYW0iLCJfIiwiT25lRGF0YSIsImVtYWlsIiwiRXJyb3IiLCJsb2dvdXQiLCJjb25zb2xlIiwibG9nIiwicGFzc3dvcmQiLCJsb2dpbiIsIk1hZ25pdHVkZVNlcnZpY2UiLCJjcmVhdGUiLCJ0eXBlcyIsImljb25zIiwiSWNvbiIsImluZGV4IiwiVHlwZSIsImlkIiwiQmFzaWMiLCJkZWwiLCJTZXEiLCJtYWduaXR1ZGVzIiwiQWxsIiwiYWxsIiwiZ29CYWNrIiwibWFnbml0dWRlIiwiZGlzcGxheV9uYW1lIiwidHlwZSIsImNvcHkiLCJjaGFuY2UiLCJzZW50ZW5jZSIsIndvcmRzIiwic3BsaXQiLCJqb2luIiwicmVwbGFjZSIsIk1lc3NhZ2UiLCJlIiwiJHRlbXBsYXRlQ2FjaGUiLCJwdXQiLCJkaXJlY3RpdmUiLCJyZXN0cmljdCIsImNvbXBpbGUiLCJ0RWxlbWVudCIsInRpdGxlIiwiaW5uZXJUZXh0IiwidGl0bGVNYWluIiwiYXR0ciIsImVtcHR5IiwiZmlsdGVyIiwiaW5wdXQiLCJzbGljZSIsImZhY3RvcnkiLCIkcmVzb3VyY2UiLCIkbG9jYXRpb24iLCJlbnYiLCJhYnNVcmwiLCJpbmRleE9mIiwicHJvZCIsInByb3RvY29sIiwiaG9zdCIsInBvcnQiLCJyb290IiwiZGV2IiwiZ2V0QXBpUGF0aCIsInBhdGgiLCJhcGkiLCJyZXN0IiwibWV0aG9kcyIsImRlZmF1bHRQYXJhbXMiLCJyZXNvdXJjZSIsIiRxIiwicmVxdWVzdCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwicmVxdWVzdEVycm9yIiwicmVqZWN0aW9uIiwicmVqZWN0IiwicmVzcG9uc2UiLCJzdGF0dXMiLCJ3aGVuIiwicmVzcG9uc2VFcnJvciIsImVycm9yIiwiQXBpU2VydmljZSIsImJhc2UiLCJuZXciLCJtZXRob2QiLCJyZXMiLCJjYiIsInZhbHVlIiwidmFsdWVzIl0sIm1hcHBpbmdzIjoiQUFBQSxRQUFBQSxXQUFBQyxFQUFBQyxHQUNBQyxhQUFBRixHQUFBQyxFQUdBLFFBQUFFLFVBQUFILEdBQ0EsTUFBQUUsY0FBQUYsR0FHQSxRQUFBSSxhQUFBSixHQUNBRSxhQUFBRyxXQUFBTCxHQ1RBLEdBQUFNLEtBQUFDLFFBQUFDLE9BQUEsZUFBQSxZQUFBLGFBQUEsYUFBQSxZQUFBLGFBQUEsa0JDQUFELFNBQUFDLE9BQUEsZUFDQUMsS0FBQSxhQUFBLFNBQUEsV0FBQSxTQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFELEdBRUFELEVBQUFHLEdBQUEsU0FBQUMsRUFBQUMsR0FDQUosRUFBQUUsR0FBQUMsRUFBQUMsSUFHQUwsRUFBQU0sZ0JBQUEsU0FBQUMsR0FFQUwsRUFBQU0sS0FDQU4sRUFBQU8sU0FDQUMsWUFBQUgsR0FDQUksU0FBQSxhQUNBQyxVQUFBLE9BSUFaLEVBQUFhLFFBQUEsU0FBQUMsRUFBQUMsR0FDQSxNQUFBQSxHQUFB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QUEsV0FDQSxNQUFBNkUsR0FBQWhCLEtBQUFwRSxLQUFBcUYsS0FBQSxXQUNBbEYsR0FBQW9GLE9BQUEsTUFBQXJJLGNBSUFnRCxPQUFBLFdBQ0EsTUFBQWtGLEdBQUFoQixLQUFBcEUsS0FBQXFGLEtBQUEsV0FDQWxGLEdBQUFvRixPQUFBLE1BQUFySSxrQkNqQkFSLFFBQUFDLE9BQUEsZUFDQTBHLFFBQUEsa0JBQUEsYUFBQSxTQUFBeEcsR0FHQSxPQUNBeUQsTUFBQSxXQUNBLE1BQUEsVUFBQWtGLEdBRUEzSSxFQUFBTSxnQkFBQWYsS0FBQStJLFNBSUEvRSxRQUFBLFNBQUFqRSxFQUFBc0osR0FDQSxNQUFBLFVBQUFELEdBQ0EsSUFBQUEsRUFBQXBKLEtBQ0EsTUFBQVMsR0FBQU0sZ0JBQUEsVUFFQSxJQUFBdUksR0FBQUYsRUFBQXBKLEtBQUFELEVBQ0EsT0FBQXVKLE9BR0FELEdBQUFDLEdBSEE3SSxFQUFBTSxnQkFBQSxlQU9Ba0YsUUFBQSxTQUFBb0QsR0FDQSxNQUFBLFVBQUFELEdBQ0EsTUFBQUEsR0FBQXBJLFNBR0FQLEVBQUFNLGdCQUFBcUksRUFBQXBJLGNBQ0FxSSxHQUFBQSxNQUhBNUksRUFBQU0sZ0JBQUEsNEJBUUFtRSxJQUFBLFNBQUFtRSxHQUNBLE1BQUEsVUFBQUQsR0FDQSxJQUFBQSxFQUFBcEosS0FDQSxNQUFBUyxHQUFBTSxnQkFBQSxVQUVBLElBQUF3SSxHQUFBSCxFQUFBcEosSUFDQXFKLEdBQUFFIiwiZmlsZSI6ImJ1bmRsZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBzYXZlTG9jYWwoa2V5LCBkYXRhKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Vba2V5XSA9IGRhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldExvY2FsKGtleSkge1xyXG4gICAgcmV0dXJuIGxvY2FsU3RvcmFnZVtrZXldO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVMb2NhbChrZXkpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbn0iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgWyd1aS5yb3V0ZXInLCBcIm5nUmVzb3VyY2VcIiwnbmdNZXNzYWdlcycsJ25nQW5pbWF0ZScsICduZ01hdGVyaWFsJywgJ25nTGV0dGVyQXZhdGFyJ10pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5ydW4oZnVuY3Rpb24oJHJvb3RTY29wZSwgJHN0YXRlLCAkbWRUb2FzdCwgJHN0YXRlKXtcclxuICAgIFxyXG4gICAgJHJvb3RTY29wZS5nbyA9IGZ1bmN0aW9uIChzdGF0ZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgJHN0YXRlLmdvKHN0YXRlLCBwYXJhbXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkcm9vdFNjb3BlLnNob3dTaW1wbGVUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcclxuXHJcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxyXG4gICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICRyb290U2NvcGUuc3RhdGlmeT1mdW5jdGlvbihwYXJlbnQsIGNoaWxkKXtcclxuICAgICAgICByZXR1cm4gY2hpbGQ/JHN0YXRlLmhyZWYocGFyZW50K1wiLlwiK2NoaWxkLnRvTG93ZXJDYXNlKCkpOlwiXCI7XHJcbiAgICB9XHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyLCAkbWRUaGVtaW5nUHJvdmlkZXIpe1xyXG5cclxuICAgIHZhciB2YWxpZFVzZXI9ZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgaWYoIWdldExvY2FsKFwidXNlclwiKSl7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuICAgICAgICB9IFxyXG4gICAgfTtcclxuXHJcbiAgICAvKipSb3V0ZXMqKi9cclxuICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgLnN0YXRlKFwibG9naW5cIiwge1xyXG4gICAgICAgIHVybDpcIi9sb2dpblwiLFxyXG4gICAgICAgIG9uRW50ZXI6ZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgICAgIGlmKGdldExvY2FsKFwidXNlclwiKSl7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwiYXBwbGljYXRpb24uZGFzaGJvYXJkXCIpO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6Jy92aWV3cy9fbG9naW4vbWFpbi5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOlwiTG9naW5DdHJsXCJcclxuXHJcbiAgICB9KVxyXG4gICAgICAgIC5zdGF0ZShcImFwcGxpY2F0aW9uXCIsIHtcclxuICAgICAgICB1cmw6XCJcIixcclxuICAgICAgICBvbkVudGVyOnZhbGlkVXNlcixcclxuICAgICAgICB0ZW1wbGF0ZVVybDonL3ZpZXdzL19hcHBsaWNhdGlvbi9tYWluLmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6XCJBcHBsaWNhdGlvbkN0cmxcIixcclxuICAgICAgICBhYnN0cmFjdDp0cnVlXHJcblxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHBsaWNhdGlvbi5kYXNoYm9hcmRcIiwge1xyXG4gICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgIG9uRW50ZXI6IHZhbGlkVXNlcixcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9fYXBwbGljYXRpb24vX2Rhc2hib2FyZC9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZEN0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5zdGF0ZShcImFwcGxpY2F0aW9uLnpvbmVzXCIsIHtcclxuICAgICAgICB1cmw6ICcvem9uZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6IHZhbGlkVXNlcixcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9fYXBwbGljYXRpb24vX3pvbmVzL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnWm9uZXNDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHBsaWNhdGlvbi50YXNrc1wiLCB7XHJcbiAgICAgICAgdXJsOiAnL3Rhc2tzJyxcclxuICAgICAgICBvbkVudGVyOiB2YWxpZFVzZXIsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvX2FwcGxpY2F0aW9uL190YXNrcy9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1Rhc2tzQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKFwiYXBwbGljYXRpb24ubWFnbml0dWRlc1wiLCB7XHJcbiAgICAgICAgdXJsOiAnL21hZ25pdHVkZXMnLFxyXG4gICAgICAgIG9uRW50ZXI6IHZhbGlkVXNlcixcclxuICAgICAgICB2aWV3czoge1xyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy92aWV3cy9fYXBwbGljYXRpb24vX21hZ25pdHVkZXMvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYWJzdHJhY3Q6dHJ1ZVxyXG4gICAgfSlcclxuICAgIC5zdGF0ZShcImFwcGxpY2F0aW9uLm1hZ25pdHVkZXMubGlzdFwiLCB7XHJcbiAgICAgICAgdXJsOiAnJyxcclxuICAgICAgICBvbkVudGVyOiB2YWxpZFVzZXIsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgJ2lubmVyJzoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvX2FwcGxpY2F0aW9uL19tYWduaXR1ZGVzL2xpc3QuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnTWFnbml0dWRlc0N0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgIC5zdGF0ZShcImFwcGxpY2F0aW9uLm1hZ25pdHVkZXMuY3JlYXRlXCIsIHtcclxuICAgICAgICB1cmw6ICcvY3JlYXRlJyxcclxuICAgICAgICBvbkVudGVyOiB2YWxpZFVzZXIsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgJ2lubmVyJzoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvX2FwcGxpY2F0aW9uL19tYWduaXR1ZGVzL2NyZWF0ZS5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdDcmVhdGVNYWduaXR1ZGVDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9sb2dpblwiKTtcclxuXHJcbiAgICAkaHR0cFByb3ZpZGVyLmludGVyY2VwdG9ycy5wdXNoKCdBdXRoSW50ZXJjZXB0b3InKTtcclxuXHJcblxyXG4gICAgLyoqVGhlbWVzKiovXHJcbiAgICAkbWRUaGVtaW5nUHJvdmlkZXIudGhlbWUoJ3NtYXJ0VGhlbWUnKVxyXG4gICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgnb3JhbmdlJylcclxuICAgICAgICAuYWNjZW50UGFsZXR0ZSgneWVsbG93Jyk7XHJcblxyXG4gICBcclxufSk7XHJcblxyXG4iLCJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgWyd1aS5yb3V0ZXInLCBcIm5nUmVzb3VyY2VcIiwnbmdNZXNzYWdlcycsJ25nQW5pbWF0ZScsICduZ01hdGVyaWFsJywgJ25nTGV0dGVyQXZhdGFyJ10pO1xyXG5cclxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLnJ1bihbXCIkcm9vdFNjb3BlXCIsIFwiJHN0YXRlXCIsIFwiJG1kVG9hc3RcIiwgXCIkc3RhdGVcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHN0YXRlLCAkbWRUb2FzdCwgJHN0YXRlKXtcclxuICAgIFxyXG4gICAgJHJvb3RTY29wZS5nbyA9IGZ1bmN0aW9uIChzdGF0ZSwgcGFyYW1zKSB7XHJcbiAgICAgICAgJHN0YXRlLmdvKHN0YXRlLCBwYXJhbXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICAkcm9vdFNjb3BlLnNob3dTaW1wbGVUb2FzdCA9IGZ1bmN0aW9uKG1lc3NhZ2UpIHtcclxuXHJcbiAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UpXHJcbiAgICAgICAgICAgIC5wb3NpdGlvbihcInRvcCByaWdodFwiKVxyXG4gICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgICRyb290U2NvcGUuc3RhdGlmeT1mdW5jdGlvbihwYXJlbnQsIGNoaWxkKXtcclxuICAgICAgICByZXR1cm4gY2hpbGQ/JHN0YXRlLmhyZWYocGFyZW50K1wiLlwiK2NoaWxkLnRvTG93ZXJDYXNlKCkpOlwiXCI7XHJcbiAgICB9XHJcblxyXG59XSk7XG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbmZpZyhbXCIkc3RhdGVQcm92aWRlclwiLCBcIiR1cmxSb3V0ZXJQcm92aWRlclwiLCBcIiRodHRwUHJvdmlkZXJcIiwgXCIkbWRUaGVtaW5nUHJvdmlkZXJcIiwgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGh0dHBQcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyKXtcclxuXHJcbiAgICB2YXIgdmFsaWRVc2VyPWZ1bmN0aW9uKCRyb290U2NvcGUpe1xyXG4gICAgICAgIGlmKCFnZXRMb2NhbChcInVzZXJcIikpe1xyXG4gICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwibG9naW5cIik7XHJcbiAgICAgICAgfSBcclxuICAgIH07XHJcbiAgICB2YWxpZFVzZXIuJGluamVjdCA9IFtcIiRyb290U2NvcGVcIl07XHJcblxyXG4gICAgLyoqUm91dGVzKiovXHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgIC5zdGF0ZShcImxvZ2luXCIsIHtcclxuICAgICAgICB1cmw6XCIvbG9naW5cIixcclxuICAgICAgICBvbkVudGVyOltcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcbiAgICAgICAgICAgIGlmKGdldExvY2FsKFwidXNlclwiKSl7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmdvKFwiYXBwbGljYXRpb24uZGFzaGJvYXJkXCIpO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1dLFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOicvdmlld3MvX2xvZ2luL21haW4uaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjpcIkxvZ2luQ3RybFwiXHJcblxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHBsaWNhdGlvblwiLCB7XHJcbiAgICAgICAgdXJsOlwiXCIsXHJcbiAgICAgICAgb25FbnRlcjp2YWxpZFVzZXIsXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6Jy92aWV3cy9fYXBwbGljYXRpb24vbWFpbi5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOlwiQXBwbGljYXRpb25DdHJsXCIsXHJcbiAgICAgICAgYWJzdHJhY3Q6dHJ1ZVxyXG5cclxuICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKFwiYXBwbGljYXRpb24uZGFzaGJvYXJkXCIsIHtcclxuICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICBvbkVudGVyOiB2YWxpZFVzZXIsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvX2FwcGxpY2F0aW9uL19kYXNoYm9hcmQvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdEYXNoYm9hcmRDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgICAuc3RhdGUoXCJhcHBsaWNhdGlvbi56b25lc1wiLCB7XHJcbiAgICAgICAgdXJsOiAnL3pvbmVzJyxcclxuICAgICAgICBvbkVudGVyOiB2YWxpZFVzZXIsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvX2FwcGxpY2F0aW9uL196b25lcy9tYWluLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1pvbmVzQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgICAgLnN0YXRlKFwiYXBwbGljYXRpb24udGFza3NcIiwge1xyXG4gICAgICAgIHVybDogJy90YXNrcycsXHJcbiAgICAgICAgb25FbnRlcjogdmFsaWRVc2VyLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL19hcHBsaWNhdGlvbi9fdGFza3MvbWFpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdUYXNrc0N0cmwnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAgIC5zdGF0ZShcImFwcGxpY2F0aW9uLm1hZ25pdHVkZXNcIiwge1xyXG4gICAgICAgIHVybDogJy9tYWduaXR1ZGVzJyxcclxuICAgICAgICBvbkVudGVyOiB2YWxpZFVzZXIsXHJcbiAgICAgICAgdmlld3M6IHtcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvX2FwcGxpY2F0aW9uL19tYWduaXR1ZGVzL21haW4uaHRtbCcsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGFic3RyYWN0OnRydWVcclxuICAgIH0pXHJcbiAgICAuc3RhdGUoXCJhcHBsaWNhdGlvbi5tYWduaXR1ZGVzLmxpc3RcIiwge1xyXG4gICAgICAgIHVybDogJycsXHJcbiAgICAgICAgb25FbnRlcjogdmFsaWRVc2VyLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICdpbm5lcic6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL19hcHBsaWNhdGlvbi9fbWFnbml0dWRlcy9saXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ01hZ25pdHVkZXNDdHJsJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgICAuc3RhdGUoXCJhcHBsaWNhdGlvbi5tYWduaXR1ZGVzLmNyZWF0ZVwiLCB7XHJcbiAgICAgICAgdXJsOiAnL2NyZWF0ZScsXHJcbiAgICAgICAgb25FbnRlcjogdmFsaWRVc2VyLFxyXG4gICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICdpbm5lcic6IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL19hcHBsaWNhdGlvbi9fbWFnbml0dWRlcy9jcmVhdGUuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnQ3JlYXRlTWFnbml0dWRlQ3RybCdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvbG9naW5cIik7XHJcblxyXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaCgnQXV0aEludGVyY2VwdG9yJyk7XHJcblxyXG5cclxuICAgIC8qKlRoZW1lcyoqL1xyXG4gICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdzbWFydFRoZW1lJylcclxuICAgICAgICAucHJpbWFyeVBhbGV0dGUoJ29yYW5nZScpXHJcbiAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3llbGxvdycpO1xyXG5cclxuICAgXHJcbn1dKTtcclxuXHJcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdBcHBsaWNhdGlvbkN0cmwnLCBbXCIkcm9vdFNjb3BlXCIsIFwiJHNjb3BlXCIsIFwiT0F1dGhTZXJ2aWNlXCIsIFwiUmVxdWVzdFNlcnZpY2VcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBPQXV0aFNlcnZpY2UsIFJlcXVlc3RTZXJ2aWNlKXtcclxuXHJcbiAgICAkc2NvcGUudXNlcj17fTtcclxuXHJcbiAgICAkc2NvcGUuYXJyYXlfY29sb3JzPUFycmF5LmFwcGx5KG51bGwsIEFycmF5KDI3KSkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFwiI0ZGOTgwMFwifSk7XHJcblxyXG4gICAgJHNjb3BlLmNsb3NlUG9wb3Zlck1haW49ZnVuY3Rpb24oKXtcclxuICAgICAgICRzY29wZS5zaG93TWFpbj1mYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgICRzY29wZS5jbG9zZVBvcG92ZXJPcHRpb25zPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAkc2NvcGUuc2hvd09wdGlvbnM9ZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRoaXMuV2hvSUFtPWZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIE9BdXRoU2VydmljZS4gd2hvaWFtKCkuXyhSZXF1ZXN0U2VydmljZS5PbmVEYXRhKFwiZW1haWxcIiwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyLmVtYWlsPWRhdGE7XHJcblxyXG4gICAgICAgIH0pLFJlcXVlc3RTZXJ2aWNlLkVycm9yKCkpOyAgXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLldob0lBbSgpO1xyXG5cclxuICAgICRzY29wZS5sb2dvdXQ9ZnVuY3Rpb24oKXtcclxuICAgICAgICBPQXV0aFNlcnZpY2UubG9nb3V0KCkuXyhmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZUxvY2FsKFwidXNlclwiKTtcclxuXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuXHJcbiAgICAgICAgfSxSZXF1ZXN0U2VydmljZS5FcnJvcigpKTsgIFxyXG4gICAgfTtcclxuXHJcblxyXG59XSk7XG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZEN0cmwnLGZ1bmN0aW9uKCl7XHJcbiAgICBcclxufSk7XG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIFtcIiRyb290U2NvcGVcIiwgXCIkc2NvcGVcIiwgXCJPQXV0aFNlcnZpY2VcIiwgXCJSZXF1ZXN0U2VydmljZVwiLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIE9BdXRoU2VydmljZSwgUmVxdWVzdFNlcnZpY2Upe1xyXG5cclxuICAgICRzY29wZS51c2VyPXtcclxuICAgICAgICBlbWFpbDpcIlwiLFxyXG4gICAgICAgIHBhc3N3b3JkOlwiXCJcclxuICAgIH1cclxuXHJcblxyXG4gICAgJHNjb3BlLmxvZ2luPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHVzZXI9JHNjb3BlLnVzZXI7XHJcbiAgICAgICAgaWYodXNlci5lbWFpbCE9PVwiXCIgJiYgdXNlci5wYXNzd29yZCl7XHJcblxyXG4gICAgICAgICAgICBPQXV0aFNlcnZpY2UubG9naW4oKS5fKHVzZXIsIFJlcXVlc3RTZXJ2aWNlLk9uZURhdGEoXCJ0b2tlblwiLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIHNhdmVMb2NhbChcInVzZXJcIiwgZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImFwcGxpY2F0aW9uLmRhc2hib2FyZFwiKTtcclxuXHJcbiAgICAgICAgICAgIH0pLFJlcXVlc3RTZXJ2aWNlLkVycm9yKCkpOyAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxufV0pO1xuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdNYWduaXR1ZGVzQ3RybCcsW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIk1hZ25pdHVkZVNlcnZpY2VcIiwgXCJSZXF1ZXN0U2VydmljZVwiLCBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUsIE1hZ25pdHVkZVNlcnZpY2UsIFJlcXVlc3RTZXJ2aWNlKXtcclxuICAgICRzY29wZS5jcmVhdGU9ZnVuY3Rpb24oKXtcclxuICAgICAgICAkcm9vdFNjb3BlLmdvKFwiYXBwbGljYXRpb24ubWFnbml0dWRlcy5jcmVhdGVcIilcclxuICAgIH07XHJcbiAgICB2YXIgdHlwZXM9W1wiQU5BTE9HXCIsIFwiRElHSVRBTFwiXVxyXG5cclxuICAgIHZhciBpY29ucz1bXCJyZWNvcmRcIiwgXCJhZGp1c3RcIl07XHJcblxyXG4gICAgJHNjb3BlLkljb249ZnVuY3Rpb24oaW5kZXgpe1xyXG4gICAgICAgIHJldHVybiBcIm1kaS1cIitpY29uc1tpbmRleF07XHJcbiAgICB9O1xyXG5cclxuICAgICRzY29wZS5UeXBlPWZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICByZXR1cm4gdHlwZXNbaW5kZXhdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuZGVsZXRlPWZ1bmN0aW9uKGlkKXtcclxuICAgICAgICBNYWduaXR1ZGVTZXJ2aWNlLkJhc2ljKCkuZGVsKHtpZDppZH0sUmVxdWVzdFNlcnZpY2UuU2VxKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAkc2NvcGUubWFnbml0dWRlcz1kYXRhO1xyXG4gICAgICAgIH0pLCBSZXF1ZXN0U2VydmljZS5FcnJvcigpKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHRoaXMuQWxsPWZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIE1hZ25pdHVkZVNlcnZpY2UuQmFzaWMoKS5hbGwoIFJlcXVlc3RTZXJ2aWNlLlNlcShmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgJHNjb3BlLm1hZ25pdHVkZXM9ZGF0YTtcclxuICAgICAgICB9KSwgUmVxdWVzdFNlcnZpY2UuRXJyb3IoKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuQWxsKCk7XHJcbn1dKTtcbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignQ3JlYXRlTWFnbml0dWRlQ3RybCcsW1wiJHJvb3RTY29wZVwiLCBcIiRzY29wZVwiLCBcIk1hZ25pdHVkZVNlcnZpY2VcIiwgXCJSZXF1ZXN0U2VydmljZVwiLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIE1hZ25pdHVkZVNlcnZpY2UsIFJlcXVlc3RTZXJ2aWNlKXtcclxuICAgICRzY29wZS5nb0JhY2s9ZnVuY3Rpb24oKXtcclxuICAgICAgICAkcm9vdFNjb3BlLmdvKFwiYXBwbGljYXRpb24ubWFnbml0dWRlcy5saXN0XCIpO1xyXG4gICAgfVxyXG5cclxuICAgICRzY29wZS5tYWduaXR1ZGU9e1xyXG4gICAgICAgIGRpc3BsYXlfbmFtZTpcIlwiLCB0eXBlOlwiMFwiXHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLmNyZWF0ZT1mdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBtYWduaXR1ZGU9YW5ndWxhci5jb3B5KCRzY29wZS5tYWduaXR1ZGUpO1xyXG4gICAgIFxyXG4gICAgICAgIGlmKG1hZ25pdHVkZS5kaXNwbGF5X25hbWU9PVwiXCIpe1xyXG4gICAgICAgICAgICBtYWduaXR1ZGUuZGlzcGxheV9uYW1lPWNoYW5jZS5zZW50ZW5jZSh7d29yZHM6IDN9KS5zcGxpdChcIiBcIikuam9pbihcIlwiKS5yZXBsYWNlKFwiLlwiLCBcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcblxyXG4gICAgICAgIE1hZ25pdHVkZVNlcnZpY2UuQmFzaWMoKS5uZXcobWFnbml0dWRlLCBSZXF1ZXN0U2VydmljZS5NZXNzYWdlKCRzY29wZS5nb0JhY2spLCBSZXF1ZXN0U2VydmljZS5FcnJvcigpKVxyXG4gICAgfVxyXG59XSk7XG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ1Rhc2tzQ3RybCcsZnVuY3Rpb24oKXtcclxuICAgIFxyXG59KTtcbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignWm9uZXNDdHJsJyxmdW5jdGlvbigpe1xyXG4gICAgXHJcbn0pO1xuZnVuY3Rpb24gc2F2ZUxvY2FsKGtleSwgZGF0YSkge1xyXG4gICAgbG9jYWxTdG9yYWdlW2tleV0gPSBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMb2NhbChrZXkpIHtcclxuICAgIHJldHVybiBsb2NhbFN0b3JhZ2Vba2V5XTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVsZXRlTG9jYWwoa2V5KSB7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG59XG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvX2FwcGxpY2F0aW9uL21haW4uaHRtbCcsXG4gICAgJzxuZy1pbmNsdWRlIHNyYz1cIlxcJy92aWV3cy9fYXBwbGljYXRpb24vX191dGlscy9wb3BvdmVyLW1haW4uaHRtbFxcJ1wiPjwvbmctaW5jbHVkZT5cXG4nICtcbiAgICAnPG5nLWluY2x1ZGUgc3JjPVwiXFwnL3ZpZXdzL19hcHBsaWNhdGlvbi9fX3V0aWxzL3BvcG92ZXItdXNlci5odG1sXFwnXCI+PC9uZy1pbmNsdWRlPlxcbicgK1xuICAgICc8ZGl2IGxheW91dD1cInJvd1wiIGZsZXg+XFxuJyArXG4gICAgJyAgICA8bWQtc2lkZW5hdiBsYXlvdXQ9XCJjb2x1bW5cIiBmbGV4PVwiMjBcIiBjbGFzcz1cIm1kLXNpZGVuYXYtbGVmdCBtZC13aGl0ZWZyYW1lLXoyXCIgIGlkPVwic2lkZWJhclwiIG1kLWNvbXBvbmVudC1pZD1cImxlZnRcIiBtZC1pcy1sb2NrZWQtb3Blbj1cIiRtZE1lZGlhKFxcJ2d0LXNtXFwnKVwiICBtZC10aGVtZT1cInNtYXJ0VGhlbWVcIj5cXG4nICtcbiAgICAnICAgICAgICA8aGVhZGVyIGNsYXNzPVwibWQtd2hpdGVmcmFtZS0yZHBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXRvb2xiYXIgbGF5b3V0PVwicm93XCIgbmctaW5pdD1cInNob3dNYWluPWZhbHNlXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8YSBjbGFzcz1cIm1kLXRvb2xiYXItdG9vbHNcIiBmbGV4PVwiODBcIiBuZy1ocmVmPVwie3tzdGF0aWZ5KFxcJ2FwcGxpY2F0aW9uXFwnLCB0aXRsZU1haW4pfX1cIiBsYXlvdXQ9XCJyb3dcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImljb24gaG91c2Vfd2l0aF9nYXJkZW5fMzZcIiBmbGV4PVwiMjBcIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPHNwYW4gZmxleD57e3RpdGxlTWFpbn19PC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvYT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1idXR0b24gYXJpYS1sYWJlbD1cIk9wZW4gbWFpbiBtZW51XCIgY2xhc3M9XCJtZC1pY29uLWJ1dHRvblwiIGZsZXggbmctY2xpY2s9XCJzaG93TWFpbj0hc2hvd01haW47IHNob3dPcHRpb25zPWZhbHNlXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPG1kLWljb24gIG1kLWZvbnQtaWNvbj1cIm1kaS1hcHBzXCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLXRvb2xiYXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvaGVhZGVyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtY29udGVudD5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXN1YmhlYWRlciBjbGFzcz1cIm1kLXByaW1hcnlcIiBsYXlvdXQ9XCJyb3dcIiBuZy1pbml0PVwic2hvd09wdGlvbnM9ZmFsc2VcIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCIgbmctY2xpY2s9XCJzaG93T3B0aW9ucz0hc2hvd09wdGlvbnM7IHNob3dNYWluPWZhbHNlXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8c3BhbiBmbGV4Pnt7dXNlci5lbWFpbH19XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktY2hldnJvbi1kb3duXCIgY2xhc3M9XCJtZGkgbWQtcHJpbWFyeVwiIGZsZXggPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1zdWJoZWFkZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L21kLWNvbnRlbnQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPC9tZC1zaWRlbmF2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8ZGl2IGZsZXggbGF5b3V0PVwiY29sdW1uXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdiB1aS12aWV3PVwiY29udGVudFwiIGZsZXg+PC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxkaXYgZmxleCBjbGFzcz1cImZvb3RlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtZGl2aWRlcj48L21kLWRpdmlkZXI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC10b29sYmFyIGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGg2IGZsZXgtb2Zmc2V0PVwiODVcIj48aSBjbGFzcz1cIm1kaSBtZGktY29weXJpZ2h0XCI+PC9pPjxzcGFuPlNtYXJ0IFRvd24gMjAxNjwvc3Bhbj48L2g2PlxcbicgK1xuICAgICcgICAgICAgICAgIFxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC10b29sYmFyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcnKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fbG9naW4vbWFpbi5odG1sJyxcbiAgICAnPHVpLXRpdGxlPlNpZ24gaW48L3VpLXRpdGxlPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnPGRpdiAgbGF5b3V0PVwicm93XCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiIGxheW91dC1maWxsIGlkPVwibG9naW4tYm9keVwiIG1kLXRoZW1lPVwic21hcnRUaGVtZVwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8ZGl2IGxheW91dD1cImNvbHVtblwiIGZsZXgtZ3QtbWQ9XCIzNVwiIGZsZXgteHM9XCI1MFwiIGZsZXgtZ3QteHM9XCI1MFwiIGxheW91dC1wYWRkaW5nPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8ZGl2IGxheW91dD1cInJvd1wiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGgyPjxpIGNsYXNzPVwiaWNvbiBob3VzZV93aXRoX2dhcmRlbl83MlwiPjwvaT48YnI+U21hcnQgVG93biBBZG1pbmlzdHJhdGlvbjwvaDI+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxtZC1jYXJkIGxheW91dD1cInJvd1wiID5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGZvcm0gbmFtZT1cImxvZ2luRm9ybVwiIGZsZXggbGF5b3V0PVwiY29sdW1uXCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIHN0cmV0Y2hcIiBsYXlvdXQtcGFkZGluZyBsYXlvdXQtbWFyZ2luPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGgzIGZsZXg+TG9nIGluIHRvIHlvdXIgYWNjb3VudDwvaDM+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyICBjbGFzcz1cIm1kLWJsb2NrXCIgZmxleD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bGFiZWw+RW1haWw8L2xhYmVsPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImVtYWlsXCIgcmVxdWlyZWQgbmFtZT1cImVtYWlsXCIgbmctbW9kZWw9XCJ1c2VyLmVtYWlsXCIgbmctcGF0dGVybj1cIi9eLitALitcXFxcLi4rJC9cIiA+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGRpdiBuZy1tZXNzYWdlcz1cImxvZ2luRm9ybS5lbWFpbC4kZXJyb3JcIiBtdWx0aXBsZSBtZC1hdXRvLWhpZGU9XCJmYWxzZVwiIG5nLWlmPVxcJ2xvZ2luRm9ybS5lbWFpbC4kZGlydHlcXCc+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgbmctbWVzc2FnZT1cInJlcXVpcmVkXCI+VGhpcyBpcyByZXF1aXJlZC48L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBuZy1tZXNzYWdlPVwicGF0dGVyblwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICAgICAgWW91ciBlbWFpbCBtdXN0IGxvb2sgbGlrZSBhbiBlLW1haWwgYWRkcmVzcy5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLWlucHV0LWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pbnB1dC1jb250YWluZXIgICBjbGFzcz1cIm1kLWJsb2NrXCIgZmxleD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bGFiZWw+UGFzc3dvcmQ8L2xhYmVsPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8aW5wdXQgbmctbW9kZWw9XCJ1c2VyLnBhc3N3b3JkXCIgdHlwZT1cInBhc3N3b3JkXCIgbmFtZT1cInBhc3N3b3JkXCIgcmVxdWlyZWQ+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGRpdiBuZy1tZXNzYWdlcz1cImxvZ2luRm9ybS5wYXNzd29yZC4kZXJyb3JcIiBtZC1hdXRvLWhpZGU9XCJmYWxzZVwiIG5nLWlmPVwibG9naW5Gb3JtLnBhc3N3b3JkLiRkaXJ0eVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IG5nLW1lc3NhZ2U9XCJyZXF1aXJlZFwiPlRoaXMgaXMgcmVxdWlyZWQuPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLWlucHV0LWNvbnRhaW5lcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pbnB1dC1jb250YWluZXIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiIGZsZXg+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPGRpdiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtc209XCJjb2x1bW5cIiBsYXlvdXQtbWFyZ2luPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtcmFpc2VkXCIgdHlwZT1cInN1Ym1pdFwiIG5nLWNsaWNrPVwibG9naW4oKVwiIGZsZXggZmxleC1zbT1cIjEwMFwiIG5nPkxvZ2luPC9tZC1idXR0b24+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9tZC1pbnB1dC1jb250YWluZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8L2Zvcm0+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtY2FyZD5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxkaXYgbGF5b3V0PVwicm93XCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aDU+PGkgY2xhc3M9XCJtZGkgbWRpLWNvcHlyaWdodFwiPjwvaT4gU21hcnQgVG93biAyMDE2PC9oNT5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcnKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fYXBwbGljYXRpb24vX2Rhc2hib2FyZC9tYWluLmh0bWwnLFxuICAgICc8dWktdGl0bGU+RGFzaGJvYXJkPC91aS10aXRsZT5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdoZWxsbyB3b3JsZCcpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19hcHBsaWNhdGlvbi9fbWFnbml0dWRlcy9jcmVhdGUuaHRtbCcsXG4gICAgJzxtZC10b29sYmFyIGNsYXNzPVwibWQtd2hpdGVmcmFtZS0xZHBcIiBpZD1cIm1haW4tdG9vbGJhclwiPlxcbicgK1xuICAgICcgICAgPGRpdiBjbGFzcz1cIiB0b29sYmFyLWNyZWF0ZSBtZC10b29sYmFyLXRvb2xzXCIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWJ1dHRvbiBhcmlhLWxhYmVsPVwiR28gQmFja1wiIGZsZXg9XCIxMFwiIGNsYXNzPVwiYnV0dG9uLWJhY2tcIiBuZy1jbGljaz1cImdvQmFjaygpXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpIGNsYXNzPVwibWRpIG1kaS1jaGV2cm9uLWxlZnRcIj48L2k+R28gQmFja1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgIDxoMiBmbGV4PlxcbicgK1xuICAgICcgICAgICAgICAgICA8c3Bhbj5OZXcgTWFnbml0dWRlPC9zcGFuPlxcbicgK1xuICAgICcgICAgICAgIDwvaDI+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnPC9tZC10b29sYmFyPlxcbicgK1xuICAgICc8bWQtY29udGVudCBsYXlvdXQtcGFkZGluZyBsYXlvdXQ9XCJjb2x1bW5cIiBtZC10aGVtZT1cInNtYXJ0VGhlbWVcIj5cXG4nICtcbiAgICAnICAgIDxkaXYgbGF5b3V0PVwicm93XCIgZmxleCBjbGFzcz1cImlucHV0LWNyZWF0ZVwiPlxcbicgK1xuICAgICcgICAgICAgIDxkaXYgIGZsZXg9XCIyMFwiICBmbGV4LW9mZnNldD1cIjVcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGgzPkRpc3BsYXkgTmFtZSA8YnI+KG9wdGlvbmFsKTwvaDM+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxwPkxlYXZlIGJsYW5rIGFuZCB3ZVxcJ2xsIGNob29zZSBvbmUgZm9yIHlvdTwvcD5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPG1kLWlucHV0LWNvbnRhaW5lciBmbGV4PVwiNTBcIiBmbGV4LW9mZnNldD1cIjEwXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cIm1hZ25pdHVkZS5kaXNwbGF5X25hbWVcIiBhcmlhLWxhYmVsPVwiRGlzcGxheSBOYW1lXCI+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1pbnB1dC1jb250YWluZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICA8bWQtZGl2aWRlciA+PC9tZC1kaXZpZGVyPlxcbicgK1xuICAgICcgICAgPGRpdiBsYXlvdXQ9XCJyb3dcIiBmbGV4IGNsYXNzPVwiaW5wdXQtY3JlYXRlXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdiAgZmxleD1cIjIwXCIgIGZsZXgtb2Zmc2V0PVwiNVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aDM+U3lzdGVtIFR5cGU8L2gzPlxcbicgK1xuICAgICcgICAgICAgICAgICA8cD5Xb3JraW5nIHdpdGggcmVhbCBudW1iZXJzIG9yIHdpdGggb24oMSkgb3Igb2ZmKDApPC9wPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtcmFkaW8tZ3JvdXAgbmctbW9kZWw9XCJtYWduaXR1ZGUudHlwZVwiIGZsZXg9XCI1MFwiIGZsZXgtb2Zmc2V0PVwiMzBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXJhZGlvLWJ1dHRvbiB2YWx1ZT1cIjBcIiBjbGFzcz1cIm1kLXByaW1hcnlcIj5BbmFsb2c8L21kLXJhZGlvLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXJhZGlvLWJ1dHRvbiB2YWx1ZT1cIjFcIiBjbGFzcz1cIm1kLXByaW1hcnlcIj5EaWdpdGFsPC9tZC1yYWRpby1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1yYWRpby1ncm91cD5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgIDxtZC1kaXZpZGVyPjwvbWQtZGl2aWRlcj5cXG4nICtcbiAgICAnICAgIDxkaXYgZmxleCBjbGFzcz1cImJ1dHRvbi1jcmVhdGVcIiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLXJhaXNlZCBtZC1wcmltYXJ5XCIgbmctY2xpY2s9XCJjcmVhdGUoKVwiPkNyZWF0ZSBNYWduaXR1ZGU8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICc8L21kLWNvbnRlbnQ+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcnKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fYXBwbGljYXRpb24vX21hZ25pdHVkZXMvbGlzdC5odG1sJyxcbiAgICAnPG1kLXRvb2xiYXIgY2xhc3M9XCJtZC13aGl0ZWZyYW1lLTFkcFwiIGlkPVwibWFpbi10b29sYmFyXCI+XFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwibWQtdG9vbGJhci10b29sc1wiIGxheW91dD1cInJvd1wiICBsYXlvdXQtYWxpZ249XCJzdGFydCBjZW50ZXJcIj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPG1kLWlucHV0LWNvbnRhaW5lciBtZC1uby1mbG9hdCBjbGFzcz1cIm1kLWJsb2NrXCIgZmxleD4gXFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1pY29uICBtZC1mb250LWljb249XCJtZGktbWFnbmlmeVwiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPiAgICAgICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCJGaWx0ZXIgbWFnbml0dWRlc1wiPlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWljb24tYnV0dG9uXCIgYXJpYS1sYWJlbD1cIk1vcmVcIiBmbGV4PVwiNVwiIG5nLWNsaWNrPVwiY3JlYXRlKClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gbWQtZm9udC1pY29uPVwibWRpLXBsdXNcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICc8L21kLXRvb2xiYXI+XFxuJyArXG4gICAgJzxtZC1jb250ZW50IGxheW91dC1wYWRkaW5nIGxheW91dD1cImNvbHVtblwiIG1kLXRoZW1lPVwic21hcnRUaGVtZVwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxtZC1saXN0ICBuZy1jbG9hayBjbGFzcz1cIm1hZ25pdHVkZS1saXN0XCI+XFxuJyArXG4gICAgJyAgICAgICAgPG1kLWxpc3QtaXRlbSAgbmctcmVwZWF0PVwibWFnbml0dWRlIGluIG1hZ25pdHVkZXNcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gIG1kLWZvbnQtaWNvbj1cInt7SWNvbihtYWduaXR1ZGUudHlwZSl9fVwiIGNsYXNzPVwibWRpIG1hZ25pdHVkZS10eXBlLWljb25cIj48L21kLWljb24+ICBcXG4nICtcbiAgICAnICAgICAgICAgICAgPHA+IHt7IG1hZ25pdHVkZS5kaXNwbGF5X25hbWUgfX0gPC9wPlxcbicgK1xuICAgICcgICAgICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICAgICAgPHAgIGZsZXgtb2Zmc2V0PVwiMzBcIj48c3BhbiBjbGFzcz1cIm1kLXdoaXRlZnJhbWUtMWRwXCIgbmctY2xhc3M9XCJ7XFwnYmFkZ2VcXCc6bWFnbml0dWRlLnR5cGU9PT1cXCcwXFwnLCBcXCdiYWRnZS1uZWdhdGl2ZVxcJzptYWduaXR1ZGUudHlwZT09PVxcJzFcXCd9XCI+e3tUeXBlKG1hZ25pdHVkZS50eXBlKX19PC9zcGFuPjwvcD5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWljb24tYnV0dG9uXCIgYXJpYS1sYWJlbD1cIkRlbGV0ZVwiIG5nLWNsaWNrPVwiZGVsZXRlKG1hZ25pdHVkZS5pZClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiIG1kaSBtZGktZGVsZXRlXCIgPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtZGl2aWRlciBuZy1pZj1cIiEkbGFzdFwiPjwvbWQtZGl2aWRlcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1saXN0LWl0ZW0+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPC9tZC1saXN0PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9tZC1jb250ZW50PicpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19hcHBsaWNhdGlvbi9fbWFnbml0dWRlcy9tYWluLmh0bWwnLFxuICAgICc8dWktdGl0bGU+TWFnbml0dWRlczwvdWktdGl0bGU+XFxuJyArXG4gICAgJzxkaXYgbGF5b3V0PVwiY29sdW1uXCIgdWktdmlldz1cImlubmVyXCI+PC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvX2FwcGxpY2F0aW9uL190YXNrcy9tYWluLmh0bWwnLFxuICAgICc8dWktdGl0bGU+VGFza3M8L3VpLXRpdGxlPlxcbicgK1xuICAgICdoZWxsbyB0YXNrcycpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19hcHBsaWNhdGlvbi9fem9uZXMvbWFpbi5odG1sJyxcbiAgICAnPHVpLXRpdGxlPlpvbmVzPC91aS10aXRsZT5cXG4nICtcbiAgICAnSGVsbG8gem9uZXMnKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fYXBwbGljYXRpb24vX191dGlscy9wb3BvdmVyLW1haW4uaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWxheWVyXCIgbmctaWY9XCJzaG93TWFpblwiIG5nLWNsaWNrPVwiY2xvc2VQb3BvdmVyTWFpbigpXCI+PC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnPGRpdiBjbGFzcz1cInBvcG92ZXItbWFpbiBtZC1vcGVuLW1lbnUtY29udGFpbmVyIG1kLXdoaXRlZnJhbWUtejIgbWQtY2xpY2thYmxlXCIgbmctY2xhc3M9XCJ7XFwnbWQtYWN0aXZlXFwnOnNob3dNYWlufVwiIG5nLWlmPVwic2hvd01haW5cIj5cXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi1jYXJldFwiPlxcbicgK1xuICAgICcgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FyZXQtb3V0ZXJcIj48L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJldC1pbm5lclwiPjwvc3Bhbj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1tYWluLWl0ZW1cIiBsYXlvdXQ9XCJyb3dcIiBmbGV4PlxcbicgK1xuICAgICcgICAgICAgIDxhIGNsYXNzPVwicG9wb3Zlci1tYWluLWxpbmtcIiBmbGV4IGxheW91dD1cImNvbHVtblwiICAgdWktc3JlZj1cImFwcGxpY2F0aW9uLmRhc2hib2FyZFwiIGxheW91dC1hbGlnbj1cInNwYWNlLWFyb3VuZCBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gIG1kLWZvbnQtaWNvbj1cIm1kaS1ib3dsaW5nXCIgY2xhc3M9XCJtZGlcIiBmbGV4PjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHNwYW4gZmxleD4gRGFzaGJvYXJkPC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJyAgICAgICAgPGEgY2xhc3M9XCJwb3BvdmVyLW1haW4tbGlua1wiIGZsZXggbGF5b3V0PVwiY29sdW1uXCIgdWktc3JlZj1cImFwcGxpY2F0aW9uLnpvbmVzXCIgbGF5b3V0LWFsaWduPVwic3BhY2UtYXJvdW5kIGNlbnRlclwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gIG1kLWZvbnQtaWNvbj1cIm1kaS1iYXNlY2FtcFwiIGNsYXNzPVwibWRpXCIgZmxleD48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuIGZsZXg+Wm9uZXM8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPC9hPlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1tYWluLWl0ZW1cIiBsYXlvdXQ9XCJyb3dcIiBmbGV4PlxcbicgK1xuICAgICcgICAgICAgIDxhIGNsYXNzPVwicG9wb3Zlci1tYWluLWxpbmtcIiBmbGV4IGxheW91dD1cImNvbHVtblwiIHVpLXNyZWY9XCJhcHBsaWNhdGlvbi50YXNrc1wiIGxheW91dC1hbGlnbj1cInNwYWNlLWFyb3VuZCBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gIG1kLWZvbnQtaWNvbj1cIm1kaS1hbGFybS1jaGVja1wiIGNsYXNzPVwibWRpXCIgZmxleD48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuIGZsZXg+VGFza3M8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPC9hPlxcbicgK1xuICAgICcgICAgICAgIDxhIGNsYXNzPVwicG9wb3Zlci1tYWluLWxpbmtcIiBmbGV4IGxheW91dD1cImNvbHVtblwiICB1aS1zcmVmPVwiYXBwbGljYXRpb24ubWFnbml0dWRlcy5saXN0XCIgbGF5b3V0LWFsaWduPVwic3BhY2UtYXJvdW5kIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiAgbWQtZm9udC1pY29uPVwibWRpLWJlZXJcIiBjbGFzcz1cIm1kaVwiIGZsZXg+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8c3BhbiBmbGV4Pk1hZ25pdHVkZXM8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPC9hPlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvX2FwcGxpY2F0aW9uL19fdXRpbHMvcG9wb3Zlci11c2VyLmh0bWwnLFxuICAgICc8ZGl2IGNsYXNzPVwicG9wb3Zlci1sYXllclwiIG5nLWlmPVwic2hvd09wdGlvbnNcIiBuZy1jbGljaz1cImNsb3NlUG9wb3Zlck9wdGlvbnMoKVwiPjwvZGl2PlxcbicgK1xuICAgICc8ZGl2IGNsYXNzPVwicG9wb3Zlci11c2VyLW9wdGlvbnMgbWQtb3Blbi1tZW51LWNvbnRhaW5lciBtZC13aGl0ZWZyYW1lLXoyIG1kLWNsaWNrYWJsZVwiIG5nLWNsYXNzPVwie1xcJ21kLWFjdGl2ZVxcJzpzaG93T3B0aW9uc31cIiBuZy1pZj1cInNob3dPcHRpb25zXCI+XFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwiZHJvcGRvd24tY2FyZXRcIj5cXG4nICtcbiAgICAnICAgICAgICA8c3BhbiBjbGFzcz1cImNhcmV0LW91dGVyXCI+PC9zcGFuPlxcbicgK1xuICAgICcgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FyZXQtaW5uZXJcIj48L3NwYW4+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJzcGFjZS1iZXR3ZWVuIG5vbmVcIiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPlxcbicgK1xuICAgICcgICAgICAgIDxhICBmbGV4IGxheW91dD1cInJvd1wiICBsYXlvdXQtYWxpZ249XCJzcGFjZS1iZXR3ZWVuIGNlbnRlclwiIGNsYXNzPVwiaXRlbS1wb3BvdmVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpIGNsYXNzPVwibWRpIG1kaS1hY2NvdW50LWNpcmNsZVwiIGZsZXg9XCI0MFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHNwYW4gIGZsZXg+QWNjb3VudDwvc3Bhbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9hPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8YSAgZmxleCBsYXlvdXQ9XCJyb3dcIiAgbGF5b3V0LWFsaWduPVwic3BhY2UtYmV0d2VlbiBjZW50ZXJcIiBjbGFzcz1cIml0ZW0tcG9wb3ZlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aSBjbGFzcz1cIm1kaSBtZGktZm9vdGJhbGwtaGVsbWV0XCIgZmxleD1cIjQwXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICA8c3BhbiBmbGV4Pkludml0ZTwvc3Bhbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9hPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8YSAgZmxleCBsYXlvdXQ9XCJyb3dcIiAgbGF5b3V0LWFsaWduPVwic3BhY2UtYmV0d2VlbiBjZW50ZXJcIiBjbGFzcz1cIml0ZW0tcG9wb3ZlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aSBjbGFzcz1cIm1kaSBtZGktcG93ZXJcIiBmbGV4PVwiNDBcIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuIG5nLWNsaWNrPVwibG9nb3V0KClcIiBmbGV4PkxvZ291dDwvc3Bhbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9hPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzwvZGl2PicpO1xufV0pO1xufSkoKTtcblxuYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5kaXJlY3RpdmUoJ3VpVGl0bGUnLCBbXCIkcm9vdFNjb3BlXCIsIGZ1bmN0aW9uKCRyb290U2NvcGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICBjb21waWxlOmZ1bmN0aW9uKHRFbGVtZW50KXtcclxuICAgICAgICAgICAgdmFyIHRpdGxlPXRFbGVtZW50WzBdLmlubmVyVGV4dDtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS50aXRsZU1haW49dGl0bGU7XHJcbiAgICAgICAgICAgIHRFbGVtZW50LmF0dHIoJ2NsYXNzJywgJ2hpZGUnKTtcclxuICAgICAgICAgICAgdEVsZW1lbnQuZW1wdHkoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XSk7XG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKS5maWx0ZXIoXHJcbiAgICBcIm5vZmlyc3RcIiwgZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGlucHV0P2lucHV0LnNsaWNlKDEpOlwiXCI7XHJcbiAgICAgICAgfX1cclxuKVxyXG5cbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbi5mYWN0b3J5KFwiQXBpU2VydmljZVwiLCBbXCIkcmVzb3VyY2VcIiwgXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24oJHJlc291cmNlLCAkbG9jYXRpb24pe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBlbnY6JGxvY2F0aW9uLmFic1VybCgpLmluZGV4T2YoXCJsb2NhbGhvc3RcIik9PS0xP1wicHJvZFwiOlwiZGV2XCIsXHJcbiAgICAgICAgLy9lbnY6XCJwcm9kXCIsXHJcbiAgICAgICAgcHJvZDp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cHNcIixcclxuICAgICAgICAgICAgaG9zdDpcInNtYXJ0LXRvd24tZGIuaGVyb2t1YXBwLmNvbVwiLFxyXG4gICAgICAgICAgICBwb3J0OlwiXCIsXHJcbiAgICAgICAgICAgIHJvb3Q6XCJhcGlcIlxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGV2OntcclxuICAgICAgICAgICAgcHJvdG9jb2w6XCJodHRwXCIsXHJcbiAgICAgICAgICAgIGhvc3Q6XCJsb2NhbGhvc3RcIixcclxuICAgICAgICAgICAgcG9ydDpcIjUwNjBcIixcclxuICAgICAgICAgICAgcm9vdDpcImFwaVwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0QXBpUGF0aDpmdW5jdGlvbihwYXRoKXtcclxuICAgICAgICAgICAgdmFyIGFwaT10aGlzW3RoaXMuZW52XTtcclxuICAgICAgICAgICAgcmV0dXJuIGFwaS5wcm90b2NvbCtcIjovL1wiK2FwaS5ob3N0KyhhcGkucG9ydCE9PVwiXCI/KFwiOlwiK2FwaS5wb3J0KTpcIlwiKStcIi9cIithcGkucm9vdCtcIi9cIitwYXRoO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlc3Q6ZnVuY3Rpb24ocGF0aCwgbWV0aG9kcywgZGVmYXVsdFBhcmFtcyl7XHJcbiAgICAgICAgICAgIHZhciByZXNvdXJjZT0kcmVzb3VyY2UoXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEFwaVBhdGgocGF0aCksXHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0UGFyYW1zIHx8IHt9LFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kcyB8fCB7fVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufV0pO1xyXG5cclxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJBdXRoSW50ZXJjZXB0b3JcIiwgW1wiJHFcIiwgXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24oJHEsICRsb2NhdGlvbil7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlcXVlc3Q6IGZ1bmN0aW9uKGNvbmZpZyl7XHJcbiAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNlcj1nZXRMb2NhbChcInVzZXJcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gJiYgdXNlcikge1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IHVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXF1ZXN0RXJyb3I6IGZ1bmN0aW9uKHJlamVjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNwb25zZTogZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICBpZihyZXNwb25zZS5kYXRhLnN0YXR1cyA9PT0gJ0VSUk9SJykgeyAvL0ZvcmNlIGVycm9yXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UgfHwgJHEud2hlbihyZXNwb25zZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICByZXNwb25zZUVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pe1xyXG4gICAgICAgICAgICBpZihyZWplY3Rpb24uc3RhdHVzID09PSA0MDMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlIGFjY2VzbycpO1xyXG4gICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS51c2VyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QocmVqZWN0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1dKTtcclxuXG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJNYWduaXR1ZGVTZXJ2aWNlXCIsIFtcIkFwaVNlcnZpY2VcIiwgZnVuY3Rpb24oQXBpU2VydmljZSl7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGJhc2U6XCJtYWduaXR1ZGVcIixcclxuICAgICAgICBCYXNpYzpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gQXBpU2VydmljZS5yZXN0KHRoaXMuYmFzZStcIi86aWRcIiwge1xyXG4gICAgICAgICAgICAgICAgbmV3OnttZXRob2Q6XCJQT1NUXCIsIHBhcmFtczp7fX0sXHJcbiAgICAgICAgICAgICAgICBhbGw6e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319LFxyXG4gICAgICAgICAgICAgICAgZGVsOnttZXRob2Q6XCJERUxFVEVcIiwgcGFyYW1zOntpZDpcIkBpZFwifX1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XSk7XG5hbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmZhY3RvcnkoXCJPQXV0aFNlcnZpY2VcIiwgW1wiQXBpU2VydmljZVwiLCBmdW5jdGlvbihBcGlTZXJ2aWNlKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmFzZTpcIm9hdXRoXCIsXHJcbiAgICAgICAgbG9naW46ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvbG9naW5cIiwge1xyXG4gICAgICAgICAgICAgICAgXzp7bWV0aG9kOlwiUE9TVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nb3V0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL2xvZ291dFwiLCB7XHJcbiAgICAgICAgICAgICAgICBfOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB3aG9pYW06ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvd2hvaWFtXCIsIHtcclxuICAgICAgICAgICAgICAgIF86e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1dKTtcbmFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIlJlcXVlc3RTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24oJHJvb3RTY29wZSl7XHJcblxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgRXJyb3I6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlcyl7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U2ltcGxlVG9hc3QoZGF0YS5lcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBPbmVEYXRhOmZ1bmN0aW9uKGtleSwgY2Ipe1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgIGlmKCFyZXMuZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRyb290U2NvcGUuc2hvd1NpbXBsZVRvYXN0KFwiTm8gZGF0YVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZT1yZXMuZGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgaWYoIXZhbHVlKXJldHVybiAkcm9vdFNjb3BlLnNob3dTaW1wbGVUb2FzdChcIk5vIFZhbHVlc1wiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgY2IodmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgTWVzc2FnZTpmdW5jdGlvbihjYil7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZXMpe1xyXG4gICAgICAgICAgICAgICAgaWYoIXJlcy5tZXNzYWdlKXtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHJvb3RTY29wZS5zaG93U2ltcGxlVG9hc3QoXCJTdWNjZXNzZnVsOiBObyBNZWVzYWdlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zaG93U2ltcGxlVG9hc3QocmVzLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgaWYoY2IpY2IoKTtcclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBTZXE6ZnVuY3Rpb24oY2Ipe1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgIGlmKCFyZXMuZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRyb290U2NvcGUuc2hvd1NpbXBsZVRvYXN0KFwiTm8gZGF0YVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXM9cmVzLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBjYih2YWx1ZXMpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufV0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24oJHJvb3RTY29wZSwgJHNjb3BlLCBPQXV0aFNlcnZpY2UsIFJlcXVlc3RTZXJ2aWNlKXtcclxuXHJcbiAgICAkc2NvcGUudXNlcj17fTtcclxuXHJcbiAgICAkc2NvcGUuYXJyYXlfY29sb3JzPUFycmF5LmFwcGx5KG51bGwsIEFycmF5KDI3KSkubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIFwiI0ZGOTgwMFwifSk7XHJcblxyXG4gICAgJHNjb3BlLmNsb3NlUG9wb3Zlck1haW49ZnVuY3Rpb24oKXtcclxuICAgICAgICRzY29wZS5zaG93TWFpbj1mYWxzZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgICRzY29wZS5jbG9zZVBvcG92ZXJPcHRpb25zPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAkc2NvcGUuc2hvd09wdGlvbnM9ZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHRoaXMuV2hvSUFtPWZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIE9BdXRoU2VydmljZS4gd2hvaWFtKCkuXyhSZXF1ZXN0U2VydmljZS5PbmVEYXRhKFwiZW1haWxcIiwgZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VyLmVtYWlsPWRhdGE7XHJcblxyXG4gICAgICAgIH0pLFJlcXVlc3RTZXJ2aWNlLkVycm9yKCkpOyAgXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLldob0lBbSgpO1xyXG5cclxuICAgICRzY29wZS5sb2dvdXQ9ZnVuY3Rpb24oKXtcclxuICAgICAgICBPQXV0aFNlcnZpY2UubG9nb3V0KCkuXyhmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZUxvY2FsKFwidXNlclwiKTtcclxuXHJcbiAgICAgICAgICAgICRyb290U2NvcGUuZ28oXCJsb2dpblwiKTtcclxuXHJcbiAgICAgICAgfSxSZXF1ZXN0U2VydmljZS5FcnJvcigpKTsgIFxyXG4gICAgfTtcclxuXHJcblxyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0Rhc2hib2FyZEN0cmwnLGZ1bmN0aW9uKCl7XHJcbiAgICBcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbigkcm9vdFNjb3BlLCAkc2NvcGUsIE9BdXRoU2VydmljZSwgUmVxdWVzdFNlcnZpY2Upe1xyXG5cclxuICAgICRzY29wZS51c2VyPXtcclxuICAgICAgICBlbWFpbDpcIlwiLFxyXG4gICAgICAgIHBhc3N3b3JkOlwiXCJcclxuICAgIH1cclxuXHJcblxyXG4gICAgJHNjb3BlLmxvZ2luPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHVzZXI9JHNjb3BlLnVzZXI7XHJcbiAgICAgICAgaWYodXNlci5lbWFpbCE9PVwiXCIgJiYgdXNlci5wYXNzd29yZCl7XHJcblxyXG4gICAgICAgICAgICBPQXV0aFNlcnZpY2UubG9naW4oKS5fKHVzZXIsIFJlcXVlc3RTZXJ2aWNlLk9uZURhdGEoXCJ0b2tlblwiLCBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIHNhdmVMb2NhbChcInVzZXJcIiwgZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5nbyhcImFwcGxpY2F0aW9uLmRhc2hib2FyZFwiKTtcclxuXHJcbiAgICAgICAgICAgIH0pLFJlcXVlc3RTZXJ2aWNlLkVycm9yKCkpOyAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG5cclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5jb250cm9sbGVyKCdNYWduaXR1ZGVzQ3RybCcsZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCBNYWduaXR1ZGVTZXJ2aWNlLCBSZXF1ZXN0U2VydmljZSl7XHJcbiAgICAkc2NvcGUuY3JlYXRlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJHJvb3RTY29wZS5nbyhcImFwcGxpY2F0aW9uLm1hZ25pdHVkZXMuY3JlYXRlXCIpXHJcbiAgICB9O1xyXG4gICAgdmFyIHR5cGVzPVtcIkFOQUxPR1wiLCBcIkRJR0lUQUxcIl1cclxuXHJcbiAgICB2YXIgaWNvbnM9W1wicmVjb3JkXCIsIFwiYWRqdXN0XCJdO1xyXG5cclxuICAgICRzY29wZS5JY29uPWZ1bmN0aW9uKGluZGV4KXtcclxuICAgICAgICByZXR1cm4gXCJtZGktXCIraWNvbnNbaW5kZXhdO1xyXG4gICAgfTtcclxuXHJcbiAgICAkc2NvcGUuVHlwZT1mdW5jdGlvbihpbmRleCl7XHJcbiAgICAgICAgcmV0dXJuIHR5cGVzW2luZGV4XTtcclxuICAgIH07XHJcblxyXG4gICAgJHNjb3BlLmRlbGV0ZT1mdW5jdGlvbihpZCl7XHJcbiAgICAgICAgTWFnbml0dWRlU2VydmljZS5CYXNpYygpLmRlbCh7aWQ6aWR9LFJlcXVlc3RTZXJ2aWNlLlNlcShmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgJHNjb3BlLm1hZ25pdHVkZXM9ZGF0YTtcclxuICAgICAgICB9KSwgUmVxdWVzdFNlcnZpY2UuRXJyb3IoKSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB0aGlzLkFsbD1mdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBNYWduaXR1ZGVTZXJ2aWNlLkJhc2ljKCkuYWxsKCBSZXF1ZXN0U2VydmljZS5TZXEoZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICRzY29wZS5tYWduaXR1ZGVzPWRhdGE7XHJcbiAgICAgICAgfSksIFJlcXVlc3RTZXJ2aWNlLkVycm9yKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLkFsbCgpO1xyXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKVxyXG4gICAgLmNvbnRyb2xsZXIoJ0NyZWF0ZU1hZ25pdHVkZUN0cmwnLGZ1bmN0aW9uKCRyb290U2NvcGUsICRzY29wZSwgTWFnbml0dWRlU2VydmljZSwgUmVxdWVzdFNlcnZpY2Upe1xyXG4gICAgJHNjb3BlLmdvQmFjaz1mdW5jdGlvbigpe1xyXG4gICAgICAgICRyb290U2NvcGUuZ28oXCJhcHBsaWNhdGlvbi5tYWduaXR1ZGVzLmxpc3RcIik7XHJcbiAgICB9XHJcblxyXG4gICAgJHNjb3BlLm1hZ25pdHVkZT17XHJcbiAgICAgICAgZGlzcGxheV9uYW1lOlwiXCIsIHR5cGU6XCIwXCJcclxuICAgIH1cclxuXHJcbiAgICAkc2NvcGUuY3JlYXRlPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIG1hZ25pdHVkZT1hbmd1bGFyLmNvcHkoJHNjb3BlLm1hZ25pdHVkZSk7XHJcbiAgICAgXHJcbiAgICAgICAgaWYobWFnbml0dWRlLmRpc3BsYXlfbmFtZT09XCJcIil7XHJcbiAgICAgICAgICAgIG1hZ25pdHVkZS5kaXNwbGF5X25hbWU9Y2hhbmNlLnNlbnRlbmNlKHt3b3JkczogM30pLnNwbGl0KFwiIFwiKS5qb2luKFwiXCIpLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgTWFnbml0dWRlU2VydmljZS5CYXNpYygpLm5ldyhtYWduaXR1ZGUsIFJlcXVlc3RTZXJ2aWNlLk1lc3NhZ2UoJHNjb3BlLmdvQmFjayksIFJlcXVlc3RTZXJ2aWNlLkVycm9yKCkpXHJcbiAgICB9XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignVGFza3NDdHJsJyxmdW5jdGlvbigpe1xyXG4gICAgXHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuY29udHJvbGxlcignWm9uZXNDdHJsJyxmdW5jdGlvbigpe1xyXG4gICAgXHJcbn0pOyIsIihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fYXBwbGljYXRpb24vbWFpbi5odG1sJyxcbiAgICAnPG5nLWluY2x1ZGUgc3JjPVwiXFwnL3ZpZXdzL19hcHBsaWNhdGlvbi9fX3V0aWxzL3BvcG92ZXItbWFpbi5odG1sXFwnXCI+PC9uZy1pbmNsdWRlPlxcbicgK1xuICAgICc8bmctaW5jbHVkZSBzcmM9XCJcXCcvdmlld3MvX2FwcGxpY2F0aW9uL19fdXRpbHMvcG9wb3Zlci11c2VyLmh0bWxcXCdcIj48L25nLWluY2x1ZGU+XFxuJyArXG4gICAgJzxkaXYgbGF5b3V0PVwicm93XCIgZmxleD5cXG4nICtcbiAgICAnICAgIDxtZC1zaWRlbmF2IGxheW91dD1cImNvbHVtblwiIGZsZXg9XCIyMFwiIGNsYXNzPVwibWQtc2lkZW5hdi1sZWZ0IG1kLXdoaXRlZnJhbWUtejJcIiAgaWQ9XCJzaWRlYmFyXCIgbWQtY29tcG9uZW50LWlkPVwibGVmdFwiIG1kLWlzLWxvY2tlZC1vcGVuPVwiJG1kTWVkaWEoXFwnZ3Qtc21cXCcpXCIgIG1kLXRoZW1lPVwic21hcnRUaGVtZVwiPlxcbicgK1xuICAgICcgICAgICAgIDxoZWFkZXIgY2xhc3M9XCJtZC13aGl0ZWZyYW1lLTJkcFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtdG9vbGJhciBsYXlvdXQ9XCJyb3dcIiBuZy1pbml0PVwic2hvd01haW49ZmFsc2VcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwibWQtdG9vbGJhci10b29sc1wiIGZsZXg9XCI4MFwiIG5nLWhyZWY9XCJ7e3N0YXRpZnkoXFwnYXBwbGljYXRpb25cXCcsIHRpdGxlTWFpbil9fVwiIGxheW91dD1cInJvd1wiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiaWNvbiBob3VzZV93aXRoX2dhcmRlbl8zNlwiIGZsZXg9XCIyMFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8c3BhbiBmbGV4Pnt7dGl0bGVNYWlufX08L3NwYW4+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPC9hPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLWJ1dHRvbiBhcmlhLWxhYmVsPVwiT3BlbiBtYWluIG1lbnVcIiBjbGFzcz1cIm1kLWljb24tYnV0dG9uXCIgZmxleCBuZy1jbGljaz1cInNob3dNYWluPSFzaG93TWFpbjsgc2hvd09wdGlvbnM9ZmFsc2VcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8bWQtaWNvbiAgbWQtZm9udC1pY29uPVwibWRpLWFwcHNcIiBjbGFzcz1cIm1kaVwiPjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvbWQtdG9vbGJhcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9oZWFkZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxtZC1jb250ZW50PlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtc3ViaGVhZGVyIGNsYXNzPVwibWQtcHJpbWFyeVwiIGxheW91dD1cInJvd1wiIG5nLWluaXQ9XCJzaG93T3B0aW9ucz1mYWxzZVwiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIiBuZy1jbGljaz1cInNob3dPcHRpb25zPSFzaG93T3B0aW9uczsgc2hvd01haW49ZmFsc2VcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxzcGFuIGZsZXg+e3t1c2VyLmVtYWlsfX1cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pY29uIG1kLWZvbnQtaWNvbj1cIm1kaS1jaGV2cm9uLWRvd25cIiBjbGFzcz1cIm1kaSBtZC1wcmltYXJ5XCIgZmxleCA+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLXN1YmhlYWRlcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvbWQtY29udGVudD5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L21kLXNpZGVuYXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxkaXYgZmxleCBsYXlvdXQ9XCJjb2x1bW5cIj5cXG4nICtcbiAgICAnICAgICAgICA8ZGl2IHVpLXZpZXc9XCJjb250ZW50XCIgZmxleD48L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPGRpdiBmbGV4IGNsYXNzPVwiZm9vdGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1kaXZpZGVyPjwvbWQtZGl2aWRlcj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLXRvb2xiYXIgbGF5b3V0PVwicm93XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICBcXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8aDYgZmxleC1vZmZzZXQ9XCI4NVwiPjxpIGNsYXNzPVwibWRpIG1kaS1jb3B5cmlnaHRcIj48L2k+PHNwYW4+U21hcnQgVG93biAyMDE2PC9zcGFuPjwvaDY+XFxuJyArXG4gICAgJyAgICAgICAgICAgXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLXRvb2xiYXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICc8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJycpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19sb2dpbi9tYWluLmh0bWwnLFxuICAgICc8dWktdGl0bGU+U2lnbiBpbjwvdWktdGl0bGU+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8ZGl2ICBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCIgbGF5b3V0LWZpbGwgaWQ9XCJsb2dpbi1ib2R5XCIgbWQtdGhlbWU9XCJzbWFydFRoZW1lXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxkaXYgbGF5b3V0PVwiY29sdW1uXCIgZmxleC1ndC1tZD1cIjM1XCIgZmxleC14cz1cIjUwXCIgZmxleC1ndC14cz1cIjUwXCIgbGF5b3V0LXBhZGRpbmc+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxkaXYgbGF5b3V0PVwicm93XCIgbGF5b3V0LWFsaWduPVwiY2VudGVyIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aDI+PGkgY2xhc3M9XCJpY29uIGhvdXNlX3dpdGhfZ2FyZGVuXzcyXCI+PC9pPjxicj5TbWFydCBUb3duIEFkbWluaXN0cmF0aW9uPC9oMj5cXG4nICtcbiAgICAnICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPG1kLWNhcmQgbGF5b3V0PVwicm93XCIgPlxcbicgK1xuICAgICcgICAgICAgICAgICA8Zm9ybSBuYW1lPVwibG9naW5Gb3JtXCIgZmxleCBsYXlvdXQ9XCJjb2x1bW5cIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgc3RyZXRjaFwiIGxheW91dC1wYWRkaW5nIGxheW91dC1tYXJnaW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8aDMgZmxleD5Mb2cgaW4gdG8geW91ciBhY2NvdW50PC9oMz5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDxtZC1pbnB1dC1jb250YWluZXIgIGNsYXNzPVwibWQtYmxvY2tcIiBmbGV4PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5FbWFpbDwvbGFiZWw+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiZW1haWxcIiByZXF1aXJlZCBuYW1lPVwiZW1haWxcIiBuZy1tb2RlbD1cInVzZXIuZW1haWxcIiBuZy1wYXR0ZXJuPVwiL14uK0AuK1xcXFwuLiskL1wiID5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZGl2IG5nLW1lc3NhZ2VzPVwibG9naW5Gb3JtLmVtYWlsLiRlcnJvclwiIG11bHRpcGxlIG1kLWF1dG8taGlkZT1cImZhbHNlXCIgbmctaWY9XFwnbG9naW5Gb3JtLmVtYWlsLiRkaXJ0eVxcJz5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBuZy1tZXNzYWdlPVwicmVxdWlyZWRcIj5UaGlzIGlzIHJlcXVpcmVkLjwvZGl2PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IG5nLW1lc3NhZ2U9XCJwYXR0ZXJuXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgICAgICBZb3VyIGVtYWlsIG11c3QgbG9vayBsaWtlIGFuIGUtbWFpbCBhZGRyZXNzLlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLWlucHV0LWNvbnRhaW5lciAgIGNsYXNzPVwibWQtYmxvY2tcIiBmbGV4PlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxsYWJlbD5QYXNzd29yZDwvbGFiZWw+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBuZy1tb2RlbD1cInVzZXIucGFzc3dvcmRcIiB0eXBlPVwicGFzc3dvcmRcIiBuYW1lPVwicGFzc3dvcmRcIiByZXF1aXJlZD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZGl2IG5nLW1lc3NhZ2VzPVwibG9naW5Gb3JtLnBhc3N3b3JkLiRlcnJvclwiIG1kLWF1dG8taGlkZT1cImZhbHNlXCIgbmctaWY9XCJsb2dpbkZvcm0ucGFzc3dvcmQuJGRpcnR5XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgbmctbWVzc2FnZT1cInJlcXVpcmVkXCI+VGhpcyBpcyByZXF1aXJlZC48L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgIDwvbWQtaW5wdXQtY29udGFpbmVyPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPG1kLWlucHV0LWNvbnRhaW5lciBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCIgZmxleD5cXG4nICtcbiAgICAnICAgICAgICAgICAgICAgICAgICA8ZGl2IGxheW91dD1cInJvd1wiIGxheW91dC1zbT1cImNvbHVtblwiIGxheW91dC1tYXJnaW4+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgICAgIDxtZC1idXR0b24gY2xhc3M9XCJtZC1yYWlzZWRcIiB0eXBlPVwic3VibWl0XCIgbmctY2xpY2s9XCJsb2dpbigpXCIgZmxleCBmbGV4LXNtPVwiMTAwXCIgbmc+TG9naW48L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJyAgICAgICAgICAgICAgICA8L21kLWlucHV0LWNvbnRhaW5lcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDwvZm9ybT5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1jYXJkPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgPGRpdiBsYXlvdXQ9XCJyb3dcIiBsYXlvdXQtYWxpZ249XCJjZW50ZXIgY2VudGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxoNT48aSBjbGFzcz1cIm1kaSBtZGktY29weXJpZ2h0XCI+PC9pPiBTbWFydCBUb3duIDIwMTY8L2g1PlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJzwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJycpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19hcHBsaWNhdGlvbi9fZGFzaGJvYXJkL21haW4uaHRtbCcsXG4gICAgJzx1aS10aXRsZT5EYXNoYm9hcmQ8L3VpLXRpdGxlPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ2hlbGxvIHdvcmxkJyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvX2FwcGxpY2F0aW9uL19tYWduaXR1ZGVzL2NyZWF0ZS5odG1sJyxcbiAgICAnPG1kLXRvb2xiYXIgY2xhc3M9XCJtZC13aGl0ZWZyYW1lLTFkcFwiIGlkPVwibWFpbi10b29sYmFyXCI+XFxuJyArXG4gICAgJyAgICA8ZGl2IGNsYXNzPVwiIHRvb2xiYXItY3JlYXRlIG1kLXRvb2xiYXItdG9vbHNcIiBsYXlvdXQ9XCJyb3dcIj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtYnV0dG9uIGFyaWEtbGFiZWw9XCJHbyBCYWNrXCIgZmxleD1cIjEwXCIgY2xhc3M9XCJidXR0b24tYmFja1wiIG5nLWNsaWNrPVwiZ29CYWNrKClcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGkgY2xhc3M9XCJtZGkgbWRpLWNoZXZyb24tbGVmdFwiPjwvaT5HbyBCYWNrXFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1idXR0b24+XFxuJyArXG4gICAgJyAgICAgICAgPGgyIGZsZXg+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuPk5ldyBNYWduaXR1ZGU8L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPC9oMj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICc8L21kLXRvb2xiYXI+XFxuJyArXG4gICAgJzxtZC1jb250ZW50IGxheW91dC1wYWRkaW5nIGxheW91dD1cImNvbHVtblwiIG1kLXRoZW1lPVwic21hcnRUaGVtZVwiPlxcbicgK1xuICAgICcgICAgPGRpdiBsYXlvdXQ9XCJyb3dcIiBmbGV4IGNsYXNzPVwiaW5wdXQtY3JlYXRlXCI+XFxuJyArXG4gICAgJyAgICAgICAgPGRpdiAgZmxleD1cIjIwXCIgIGZsZXgtb2Zmc2V0PVwiNVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8aDM+RGlzcGxheSBOYW1lIDxicj4ob3B0aW9uYWwpPC9oMz5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHA+TGVhdmUgYmxhbmsgYW5kIHdlXFwnbGwgY2hvb3NlIG9uZSBmb3IgeW91PC9wPlxcbicgK1xuICAgICcgICAgICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyIGZsZXg9XCI1MFwiIGZsZXgtb2Zmc2V0PVwiMTBcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGlucHV0IG5nLW1vZGVsPVwibWFnbml0dWRlLmRpc3BsYXlfbmFtZVwiIGFyaWEtbGFiZWw9XCJEaXNwbGF5IE5hbWVcIj5cXG4nICtcbiAgICAnICAgICAgICA8L21kLWlucHV0LWNvbnRhaW5lcj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgIDxtZC1kaXZpZGVyID48L21kLWRpdmlkZXI+XFxuJyArXG4gICAgJyAgICA8ZGl2IGxheW91dD1cInJvd1wiIGZsZXggY2xhc3M9XCJpbnB1dC1jcmVhdGVcIj5cXG4nICtcbiAgICAnICAgICAgICA8ZGl2ICBmbGV4PVwiMjBcIiAgZmxleC1vZmZzZXQ9XCI1XCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxoMz5TeXN0ZW0gVHlwZTwvaDM+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxwPldvcmtpbmcgd2l0aCByZWFsIG51bWJlcnMgb3Igd2l0aCBvbigxKSBvciBvZmYoMCk8L3A+XFxuJyArXG4gICAgJyAgICAgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxtZC1yYWRpby1ncm91cCBuZy1tb2RlbD1cIm1hZ25pdHVkZS50eXBlXCIgZmxleD1cIjUwXCIgZmxleC1vZmZzZXQ9XCIzMFwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtcmFkaW8tYnV0dG9uIHZhbHVlPVwiMFwiIGNsYXNzPVwibWQtcHJpbWFyeVwiPkFuYWxvZzwvbWQtcmFkaW8tYnV0dG9uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtcmFkaW8tYnV0dG9uIHZhbHVlPVwiMVwiIGNsYXNzPVwibWQtcHJpbWFyeVwiPkRpZ2l0YWw8L21kLXJhZGlvLWJ1dHRvbj5cXG4nICtcbiAgICAnICAgICAgICA8L21kLXJhZGlvLWdyb3VwPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICcgICAgPG1kLWRpdmlkZXI+PC9tZC1kaXZpZGVyPlxcbicgK1xuICAgICcgICAgPGRpdiBmbGV4IGNsYXNzPVwiYnV0dG9uLWNyZWF0ZVwiIGxheW91dD1cInJvd1wiIGxheW91dC1hbGlnbj1cImNlbnRlciBjZW50ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtcmFpc2VkIG1kLXByaW1hcnlcIiBuZy1jbGljaz1cImNyZWF0ZSgpXCI+Q3JlYXRlIE1hZ25pdHVkZTwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJzwvbWQtY29udGVudD5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJycpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19hcHBsaWNhdGlvbi9fbWFnbml0dWRlcy9saXN0Lmh0bWwnLFxuICAgICc8bWQtdG9vbGJhciBjbGFzcz1cIm1kLXdoaXRlZnJhbWUtMWRwXCIgaWQ9XCJtYWluLXRvb2xiYXJcIj5cXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJtZC10b29sYmFyLXRvb2xzXCIgbGF5b3V0PVwicm93XCIgIGxheW91dC1hbGlnbj1cInN0YXJ0IGNlbnRlclwiPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtaW5wdXQtY29udGFpbmVyIG1kLW5vLWZsb2F0IGNsYXNzPVwibWQtYmxvY2tcIiBmbGV4PiBcXG4nICtcbiAgICAnICAgICAgICAgICAgPG1kLWljb24gIG1kLWZvbnQtaWNvbj1cIm1kaS1tYWduaWZ5XCIgY2xhc3M9XCJtZGlcIj48L21kLWljb24+ICAgICAgICAgICAgIFxcbicgK1xuICAgICcgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIkZpbHRlciBtYWduaXR1ZGVzXCI+XFxuJyArXG4gICAgJyAgICAgICAgPC9tZC1pbnB1dC1jb250YWluZXI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtaWNvbi1idXR0b25cIiBhcmlhLWxhYmVsPVwiTW9yZVwiIGZsZXg9XCI1XCIgbmctY2xpY2s9XCJjcmVhdGUoKVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiBtZC1mb250LWljb249XCJtZGktcGx1c1wiIGNsYXNzPVwibWRpXCI+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgIDwvbWQtYnV0dG9uPlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJzwvbWQtdG9vbGJhcj5cXG4nICtcbiAgICAnPG1kLWNvbnRlbnQgbGF5b3V0LXBhZGRpbmcgbGF5b3V0PVwiY29sdW1uXCIgbWQtdGhlbWU9XCJzbWFydFRoZW1lXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPG1kLWxpc3QgIG5nLWNsb2FrIGNsYXNzPVwibWFnbml0dWRlLWxpc3RcIj5cXG4nICtcbiAgICAnICAgICAgICA8bWQtbGlzdC1pdGVtICBuZy1yZXBlYXQ9XCJtYWduaXR1ZGUgaW4gbWFnbml0dWRlc1wiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiAgbWQtZm9udC1pY29uPVwie3tJY29uKG1hZ25pdHVkZS50eXBlKX19XCIgY2xhc3M9XCJtZGkgbWFnbml0dWRlLXR5cGUtaWNvblwiPjwvbWQtaWNvbj4gIFxcbicgK1xuICAgICcgICAgICAgICAgICA8cD4ge3sgbWFnbml0dWRlLmRpc3BsYXlfbmFtZSB9fSA8L3A+XFxuJyArXG4gICAgJyAgICAgICAgICAgIFxcbicgK1xuICAgICcgICAgICAgICAgICA8cCAgZmxleC1vZmZzZXQ9XCIzMFwiPjxzcGFuIGNsYXNzPVwibWQtd2hpdGVmcmFtZS0xZHBcIiBuZy1jbGFzcz1cIntcXCdiYWRnZVxcJzptYWduaXR1ZGUudHlwZT09PVxcJzBcXCcsIFxcJ2JhZGdlLW5lZ2F0aXZlXFwnOm1hZ25pdHVkZS50eXBlPT09XFwnMVxcJ31cIj57e1R5cGUobWFnbml0dWRlLnR5cGUpfX08L3NwYW4+PC9wPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtaWNvbi1idXR0b25cIiBhcmlhLWxhYmVsPVwiRGVsZXRlXCIgbmctY2xpY2s9XCJkZWxldGUobWFnbml0dWRlLmlkKVwiPlxcbicgK1xuICAgICcgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCIgbWRpIG1kaS1kZWxldGVcIiA+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICA8L21kLWJ1dHRvbj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1kaXZpZGVyIG5nLWlmPVwiISRsYXN0XCI+PC9tZC1kaXZpZGVyPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L21kLWxpc3QtaXRlbT5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8L21kLWxpc3Q+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8L21kLWNvbnRlbnQ+Jyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvX2FwcGxpY2F0aW9uL19tYWduaXR1ZGVzL21haW4uaHRtbCcsXG4gICAgJzx1aS10aXRsZT5NYWduaXR1ZGVzPC91aS10aXRsZT5cXG4nICtcbiAgICAnPGRpdiBsYXlvdXQ9XCJjb2x1bW5cIiB1aS12aWV3PVwiaW5uZXJcIj48L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fYXBwbGljYXRpb24vX3Rhc2tzL21haW4uaHRtbCcsXG4gICAgJzx1aS10aXRsZT5UYXNrczwvdWktdGl0bGU+XFxuJyArXG4gICAgJ2hlbGxvIHRhc2tzJyk7XG59XSk7XG59KSgpO1xuXG4oZnVuY3Rpb24obW9kdWxlKSB7XG50cnkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nKTtcbn0gY2F0Y2ggKGUpIHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJywgW10pO1xufVxubW9kdWxlLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KCcvdmlld3MvX2FwcGxpY2F0aW9uL196b25lcy9tYWluLmh0bWwnLFxuICAgICc8dWktdGl0bGU+Wm9uZXM8L3VpLXRpdGxlPlxcbicgK1xuICAgICdIZWxsbyB6b25lcycpO1xufV0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKG1vZHVsZSkge1xudHJ5IHtcbiAgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJyk7XG59IGNhdGNoIChlKSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicsIFtdKTtcbn1cbm1vZHVsZS5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICR0ZW1wbGF0ZUNhY2hlLnB1dCgnL3ZpZXdzL19hcHBsaWNhdGlvbi9fX3V0aWxzL3BvcG92ZXItbWFpbi5odG1sJyxcbiAgICAnPGRpdiBjbGFzcz1cInBvcG92ZXItbGF5ZXJcIiBuZy1pZj1cInNob3dNYWluXCIgbmctY2xpY2s9XCJjbG9zZVBvcG92ZXJNYWluKClcIj48L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8ZGl2IGNsYXNzPVwicG9wb3Zlci1tYWluIG1kLW9wZW4tbWVudS1jb250YWluZXIgbWQtd2hpdGVmcmFtZS16MiBtZC1jbGlja2FibGVcIiBuZy1jbGFzcz1cIntcXCdtZC1hY3RpdmVcXCc6c2hvd01haW59XCIgbmctaWY9XCJzaG93TWFpblwiPlxcbicgK1xuICAgICcgICAgPGRpdiBjbGFzcz1cImRyb3Bkb3duLWNhcmV0XCI+XFxuJyArXG4gICAgJyAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJldC1vdXRlclwiPjwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICA8c3BhbiBjbGFzcz1cImNhcmV0LWlubmVyXCI+PC9zcGFuPlxcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLW1haW4taXRlbVwiIGxheW91dD1cInJvd1wiIGZsZXg+XFxuJyArXG4gICAgJyAgICAgICAgPGEgY2xhc3M9XCJwb3BvdmVyLW1haW4tbGlua1wiIGZsZXggbGF5b3V0PVwiY29sdW1uXCIgICB1aS1zcmVmPVwiYXBwbGljYXRpb24uZGFzaGJvYXJkXCIgbGF5b3V0LWFsaWduPVwic3BhY2UtYXJvdW5kIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiAgbWQtZm9udC1pY29uPVwibWRpLWJvd2xpbmdcIiBjbGFzcz1cIm1kaVwiIGZsZXg+PC9tZC1pY29uPlxcbicgK1xuICAgICcgICAgICAgICAgICA8c3BhbiBmbGV4PiBEYXNoYm9hcmQ8L3NwYW4+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDwvYT5cXG4nICtcbiAgICAnICAgICAgICA8YSBjbGFzcz1cInBvcG92ZXItbWFpbi1saW5rXCIgZmxleCBsYXlvdXQ9XCJjb2x1bW5cIiB1aS1zcmVmPVwiYXBwbGljYXRpb24uem9uZXNcIiBsYXlvdXQtYWxpZ249XCJzcGFjZS1hcm91bmQgY2VudGVyXCI+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiAgbWQtZm9udC1pY29uPVwibWRpLWJhc2VjYW1wXCIgY2xhc3M9XCJtZGlcIiBmbGV4PjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHNwYW4gZmxleD5ab25lczwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLW1haW4taXRlbVwiIGxheW91dD1cInJvd1wiIGZsZXg+XFxuJyArXG4gICAgJyAgICAgICAgPGEgY2xhc3M9XCJwb3BvdmVyLW1haW4tbGlua1wiIGZsZXggbGF5b3V0PVwiY29sdW1uXCIgdWktc3JlZj1cImFwcGxpY2F0aW9uLnRhc2tzXCIgbGF5b3V0LWFsaWduPVwic3BhY2UtYXJvdW5kIGNlbnRlclwiPlxcbicgK1xuICAgICcgICAgICAgICAgICA8bWQtaWNvbiAgbWQtZm9udC1pY29uPVwibWRpLWFsYXJtLWNoZWNrXCIgY2xhc3M9XCJtZGlcIiBmbGV4PjwvbWQtaWNvbj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHNwYW4gZmxleD5UYXNrczwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJyAgICAgICAgPGEgY2xhc3M9XCJwb3BvdmVyLW1haW4tbGlua1wiIGZsZXggbGF5b3V0PVwiY29sdW1uXCIgIHVpLXNyZWY9XCJhcHBsaWNhdGlvbi5tYWduaXR1ZGVzLmxpc3RcIiBsYXlvdXQtYWxpZ249XCJzcGFjZS1hcm91bmQgY2VudGVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxtZC1pY29uICBtZC1mb250LWljb249XCJtZGktYmVlclwiIGNsYXNzPVwibWRpXCIgZmxleD48L21kLWljb24+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuIGZsZXg+TWFnbml0dWRlczwvc3Bhbj5cXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJyAgICA8L2Rpdj5cXG4nICtcbiAgICAnXFxuJyArXG4gICAgJ1xcbicgK1xuICAgICc8L2Rpdj4nKTtcbn1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbihtb2R1bGUpIHtcbnRyeSB7XG4gIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpO1xufSBjYXRjaCAoZSkge1xuICBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnQXBwbGljYXRpb24nLCBbXSk7XG59XG5tb2R1bGUucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAkdGVtcGxhdGVDYWNoZS5wdXQoJy92aWV3cy9fYXBwbGljYXRpb24vX191dGlscy9wb3BvdmVyLXVzZXIuaHRtbCcsXG4gICAgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLWxheWVyXCIgbmctaWY9XCJzaG93T3B0aW9uc1wiIG5nLWNsaWNrPVwiY2xvc2VQb3BvdmVyT3B0aW9ucygpXCI+PC9kaXY+XFxuJyArXG4gICAgJzxkaXYgY2xhc3M9XCJwb3BvdmVyLXVzZXItb3B0aW9ucyBtZC1vcGVuLW1lbnUtY29udGFpbmVyIG1kLXdoaXRlZnJhbWUtejIgbWQtY2xpY2thYmxlXCIgbmctY2xhc3M9XCJ7XFwnbWQtYWN0aXZlXFwnOnNob3dPcHRpb25zfVwiIG5nLWlmPVwic2hvd09wdGlvbnNcIj5cXG4nICtcbiAgICAnICAgIDxkaXYgY2xhc3M9XCJkcm9wZG93bi1jYXJldFwiPlxcbicgK1xuICAgICcgICAgICAgIDxzcGFuIGNsYXNzPVwiY2FyZXQtb3V0ZXJcIj48L3NwYW4+XFxuJyArXG4gICAgJyAgICAgICAgPHNwYW4gY2xhc3M9XCJjYXJldC1pbm5lclwiPjwvc3Bhbj5cXG4nICtcbiAgICAnICAgIDwvZGl2PlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnXFxuJyArXG4gICAgJyAgICA8ZGl2IGxheW91dD1cImNvbHVtblwiIGxheW91dC1hbGlnbj1cInNwYWNlLWJldHdlZW4gbm9uZVwiIGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCI+XFxuJyArXG4gICAgJyAgICAgICAgPGEgIGZsZXggbGF5b3V0PVwicm93XCIgIGxheW91dC1hbGlnbj1cInNwYWNlLWJldHdlZW4gY2VudGVyXCIgY2xhc3M9XCJpdGVtLXBvcG92ZXJcIj5cXG4nICtcbiAgICAnICAgICAgICAgICAgPGkgY2xhc3M9XCJtZGkgbWRpLWFjY291bnQtY2lyY2xlXCIgZmxleD1cIjQwXCI+PC9pPlxcbicgK1xuICAgICcgICAgICAgICAgICA8c3BhbiAgZmxleD5BY2NvdW50PC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxhICBmbGV4IGxheW91dD1cInJvd1wiICBsYXlvdXQtYWxpZ249XCJzcGFjZS1iZXR3ZWVuIGNlbnRlclwiIGNsYXNzPVwiaXRlbS1wb3BvdmVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpIGNsYXNzPVwibWRpIG1kaS1mb290YmFsbC1oZWxtZXRcIiBmbGV4PVwiNDBcIj48L2k+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxzcGFuIGZsZXg+SW52aXRlPC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgICAgIDxhICBmbGV4IGxheW91dD1cInJvd1wiICBsYXlvdXQtYWxpZ249XCJzcGFjZS1iZXR3ZWVuIGNlbnRlclwiIGNsYXNzPVwiaXRlbS1wb3BvdmVyXCI+XFxuJyArXG4gICAgJyAgICAgICAgICAgIDxpIGNsYXNzPVwibWRpIG1kaS1wb3dlclwiIGZsZXg9XCI0MFwiPjwvaT5cXG4nICtcbiAgICAnICAgICAgICAgICAgPHNwYW4gbmctY2xpY2s9XCJsb2dvdXQoKVwiIGZsZXg+TG9nb3V0PC9zcGFuPlxcbicgK1xuICAgICdcXG4nICtcbiAgICAnICAgICAgICA8L2E+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICcgICAgPC9kaXY+XFxuJyArXG4gICAgJ1xcbicgK1xuICAgICdcXG4nICtcbiAgICAnPC9kaXY+Jyk7XG59XSk7XG59KSgpO1xuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5kaXJlY3RpdmUoJ3VpVGl0bGUnLCBmdW5jdGlvbigkcm9vdFNjb3BlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgY29tcGlsZTpmdW5jdGlvbih0RWxlbWVudCl7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZT10RWxlbWVudFswXS5pbm5lclRleHQ7XHJcbiAgICAgICAgICAgICRyb290U2NvcGUudGl0bGVNYWluPXRpdGxlO1xyXG4gICAgICAgICAgICB0RWxlbWVudC5hdHRyKCdjbGFzcycsICdoaWRlJyk7XHJcbiAgICAgICAgICAgIHRFbGVtZW50LmVtcHR5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufSk7IiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJykuZmlsdGVyKFxyXG4gICAgXCJub2ZpcnN0XCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnB1dD9pbnB1dC5zbGljZSgxKTpcIlwiO1xyXG4gICAgICAgIH19XHJcbilcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuLmZhY3RvcnkoXCJBcGlTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRyZXNvdXJjZSwgJGxvY2F0aW9uKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZW52OiRsb2NhdGlvbi5hYnNVcmwoKS5pbmRleE9mKFwibG9jYWxob3N0XCIpPT0tMT9cInByb2RcIjpcImRldlwiLFxyXG4gICAgICAgIC8vZW52OlwicHJvZFwiLFxyXG4gICAgICAgIHByb2Q6e1xyXG4gICAgICAgICAgICBwcm90b2NvbDpcImh0dHBzXCIsXHJcbiAgICAgICAgICAgIGhvc3Q6XCJzbWFydC10b3duLWRiLmhlcm9rdWFwcC5jb21cIixcclxuICAgICAgICAgICAgcG9ydDpcIlwiLFxyXG4gICAgICAgICAgICByb290OlwiYXBpXCJcclxuICAgICAgICB9LFxyXG4gICAgICAgIGRldjp7XHJcbiAgICAgICAgICAgIHByb3RvY29sOlwiaHR0cFwiLFxyXG4gICAgICAgICAgICBob3N0OlwibG9jYWxob3N0XCIsXHJcbiAgICAgICAgICAgIHBvcnQ6XCI1MDYwXCIsXHJcbiAgICAgICAgICAgIHJvb3Q6XCJhcGlcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldEFwaVBhdGg6ZnVuY3Rpb24ocGF0aCl7XHJcbiAgICAgICAgICAgIHZhciBhcGk9dGhpc1t0aGlzLmVudl07XHJcbiAgICAgICAgICAgIHJldHVybiBhcGkucHJvdG9jb2wrXCI6Ly9cIithcGkuaG9zdCsoYXBpLnBvcnQhPT1cIlwiPyhcIjpcIithcGkucG9ydCk6XCJcIikrXCIvXCIrYXBpLnJvb3QrXCIvXCIrcGF0aDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZXN0OmZ1bmN0aW9uKHBhdGgsIG1ldGhvZHMsIGRlZmF1bHRQYXJhbXMpe1xyXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2U9JHJlc291cmNlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRBcGlQYXRoKHBhdGgpLFxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdFBhcmFtcyB8fCB7fSxcclxuICAgICAgICAgICAgICAgIG1ldGhvZHMgfHwge31cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pO1xyXG5cclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiQXV0aEludGVyY2VwdG9yXCIsIGZ1bmN0aW9uKCRxLCAkbG9jYXRpb24pe1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXF1ZXN0OiBmdW5jdGlvbihjb25maWcpe1xyXG4gICAgICAgICAgICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZXI9Z2V0TG9jYWwoXCJ1c2VyXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uICYmIHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB1c2VyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVxdWVzdEVycm9yOiBmdW5jdGlvbihyZWplY3Rpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZWplY3Rpb24pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2U6IGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgaWYocmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09ICdFUlJPUicpIHsgLy9Gb3JjZSBlcnJvclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8ICRxLndoZW4ocmVzcG9uc2UpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzcG9uc2VFcnJvcjogZnVuY3Rpb24ocmVqZWN0aW9uKXtcclxuICAgICAgICAgICAgaWYocmVqZWN0aW9uLnN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZSBhY2Nlc28nKTtcclxuICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudXNlciA9ICcnO1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlamVjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ0FwcGxpY2F0aW9uJylcclxuICAgIC5mYWN0b3J5KFwiTWFnbml0dWRlU2VydmljZVwiLCBmdW5jdGlvbihBcGlTZXJ2aWNlKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmFzZTpcIm1hZ25pdHVkZVwiLFxyXG4gICAgICAgIEJhc2ljOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiLzppZFwiLCB7XHJcbiAgICAgICAgICAgICAgICBuZXc6e21ldGhvZDpcIlBPU1RcIiwgcGFyYW1zOnt9fSxcclxuICAgICAgICAgICAgICAgIGFsbDp7bWV0aG9kOlwiR0VUXCIsIHBhcmFtczp7fX0sXHJcbiAgICAgICAgICAgICAgICBkZWw6e21ldGhvZDpcIkRFTEVURVwiLCBwYXJhbXM6e2lkOlwiQGlkXCJ9fVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIk9BdXRoU2VydmljZVwiLCBmdW5jdGlvbihBcGlTZXJ2aWNlKXtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYmFzZTpcIm9hdXRoXCIsXHJcbiAgICAgICAgbG9naW46ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvbG9naW5cIiwge1xyXG4gICAgICAgICAgICAgICAgXzp7bWV0aG9kOlwiUE9TVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbG9nb3V0OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBBcGlTZXJ2aWNlLnJlc3QodGhpcy5iYXNlK1wiL2xvZ291dFwiLCB7XHJcbiAgICAgICAgICAgICAgICBfOnttZXRob2Q6XCJHRVRcIiwgcGFyYW1zOnt9fVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB3aG9pYW06ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIEFwaVNlcnZpY2UucmVzdCh0aGlzLmJhc2UrXCIvd2hvaWFtXCIsIHtcclxuICAgICAgICAgICAgICAgIF86e21ldGhvZDpcIkdFVFwiLCBwYXJhbXM6e319XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0pOyIsImFuZ3VsYXIubW9kdWxlKCdBcHBsaWNhdGlvbicpXHJcbiAgICAuZmFjdG9yeShcIlJlcXVlc3RTZXJ2aWNlXCIsIGZ1bmN0aW9uKCRyb290U2NvcGUpe1xyXG5cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIEVycm9yOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZXMpe1xyXG5cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1NpbXBsZVRvYXN0KGRhdGEuZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgT25lRGF0YTpmdW5jdGlvbihrZXksIGNiKXtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICBpZighcmVzLmRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcm9vdFNjb3BlLnNob3dTaW1wbGVUb2FzdChcIk5vIGRhdGFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU9cmVzLmRhdGFba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmKCF2YWx1ZSlyZXR1cm4gJHJvb3RTY29wZS5zaG93U2ltcGxlVG9hc3QoXCJObyBWYWx1ZXNcIik7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGNiKHZhbHVlKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIE1lc3NhZ2U6ZnVuY3Rpb24oY2Ipe1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgIGlmKCFyZXMubWVzc2FnZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRyb290U2NvcGUuc2hvd1NpbXBsZVRvYXN0KFwiU3VjY2Vzc2Z1bDogTm8gTWVlc2FnZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuc2hvd1NpbXBsZVRvYXN0KHJlcy5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGlmKGNiKWNiKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgU2VxOmZ1bmN0aW9uKGNiKXtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHJlcyl7XHJcbiAgICAgICAgICAgICAgICBpZighcmVzLmRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcm9vdFNjb3BlLnNob3dTaW1wbGVUb2FzdChcIk5vIGRhdGFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzPXJlcy5kYXRhO1xyXG4gICAgICAgICAgICAgICAgY2IodmFsdWVzKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
